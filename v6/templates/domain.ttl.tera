{# μ₃ Template: Renders domain ontology from extracted classes #}
@prefix gv6: <http://ggen.dev/v6#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix shacl: <http://www.w3.org/ns/shacl#> .
@prefix {{ project.prefix | default(value="domain") }}: <{{ project.namespace | default(value="http://example.org/") }}> .

# {{ project.name | default(value="Domain") }} Ontology
# Generated by ggen v6: A = μ(O)
# Epoch: {{ epoch.id }}
# Timestamp: {{ epoch.timestamp }}

{% for class in classes %}
# Class: {{ class.name }}
{{ project.prefix | default(value="domain") }}:{{ class.name }}
  a owl:Class ;
  rdfs:label "{{ class.label | default(value=class.name) }}"@en ;
{% if class.description %}
  rdfs:comment "{{ class.description }}"@en ;
{% endif %}
{% if class.parent %}
  rdfs:subClassOf {{ project.prefix | default(value="domain") }}:{{ class.parent }} ;
{% endif %}
  .

{% endfor %}
{% for property in properties %}
# Property: {{ property.name }}
{{ project.prefix | default(value="domain") }}:{{ property.name }}
  a owl:{{ property.type | default(value="DatatypeProperty") }} ;
  rdfs:label "{{ property.label | default(value=property.name) }}"@en ;
{% if property.domain %}
  rdfs:domain {{ project.prefix | default(value="domain") }}:{{ property.domain }} ;
{% endif %}
{% if property.range %}
  rdfs:range {{ property.range }} ;
{% endif %}
{% if property.description %}
  rdfs:comment "{{ property.description }}"@en ;
{% endif %}
  .

{% endfor %}
{% for shape in shapes %}
# Shape: {{ shape.name }}Shape
{{ project.prefix | default(value="domain") }}:{{ shape.name }}Shape
  a shacl:NodeShape ;
  shacl:targetClass {{ project.prefix | default(value="domain") }}:{{ shape.target }} ;
{% for prop in shape.properties %}
  shacl:property [
    shacl:path {{ project.prefix | default(value="domain") }}:{{ prop.path }} ;
{% if prop.datatype %}
    shacl:datatype {{ prop.datatype }} ;
{% endif %}
{% if prop.minCount %}
    shacl:minCount {{ prop.minCount }} ;
{% endif %}
{% if prop.maxCount %}
    shacl:maxCount {{ prop.maxCount }} ;
{% endif %}
{% if prop.pattern %}
    shacl:pattern "{{ prop.pattern }}" ;
{% endif %}
  ] ;
{% endfor %}
  .

{% endfor %}

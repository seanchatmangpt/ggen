@startuml C4_EPIC9_Cycle
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml

title EPIC 9 Atomic Cycle - Parallel Agent Orchestration

rectangle "PHASE 1: FAN-OUT" #LightBlue {
    rectangle "Specification Closure Check" as spec_check
    rectangle "Spawn 10 Parallel Agents" as spawn_agents
    spec_check --> spawn_agents: Verified ✓
}

rectangle "PHASE 2: INDEPENDENT CONSTRUCTION" #LightGreen {
    rectangle "Agent 1: RW-004\nRW-005" as agent1
    rectangle "Agent 2: RW-006\nRW-007" as agent2
    rectangle "Agent 3: RW-008\nRW-009" as agent3
    rectangle "Agent 4: RW-010\nRW-011" as agent4
    rectangle "Agent 5: RW-012\nRW-013" as agent5
    rectangle "Agent 6: RW-014\nRW-015" as agent6
    rectangle "Agent 7: RW-016\nRW-017" as agent7
    rectangle "Agent 8: RW-018\nRW-019" as agent8
    rectangle "Agent 9: RW-020+\n(remaining)" as agent9
    rectangle "Agent 10: Test & Validation\nInfrastructure" as agent10

    spawn_agents --> agent1
    spawn_agents --> agent2
    spawn_agents --> agent3
    spawn_agents --> agent4
    spawn_agents --> agent5
    spawn_agents --> agent6
    spawn_agents --> agent7
    spawn_agents --> agent8
    spawn_agents --> agent9
    spawn_agents --> agent10
}

rectangle "PHASE 3: COLLISION DETECTION" #Yellow {
    rectangle "Structural Overlap\nAnalysis" as struct_overlap
    rectangle "Semantic Convergence\nDetection" as semantic_conv
    rectangle "Divergence\nIdentification" as divergence

    agent1 --> struct_overlap
    agent2 --> struct_overlap
    agent3 --> struct_overlap
    agent4 --> semantic_conv
    agent5 --> semantic_conv
    agent6 --> semantic_conv
    agent7 --> divergence
    agent8 --> divergence
    agent9 --> divergence
    agent10 --> struct_overlap
}

rectangle "PHASE 4: CONVERGENCE" #Orange {
    rectangle "Selection Pressure\nApplication" as selection
    rectangle "Best Solution\nSynthesis" as synthesis
    struct_overlap --> selection
    semantic_conv --> selection
    divergence --> selection
    selection --> synthesis
}

rectangle "PHASE 5: REFACTORING & SYNTHESIS" #LightCyan {
    rectangle "Merge High-Confidence\nOutputs" as merge
    rectangle "Discard Redundant\nSolutions" as discard
    rectangle "Rewrite Divergent\nApproaches" as rewrite

    synthesis --> merge
    synthesis --> discard
    synthesis --> rewrite
}

rectangle "PHASE 6: CLOSURE" #LightGray {
    rectangle "Validate All Phases\nComplete" as validate_closure
    rectangle "Generate Completion\nReport" as final_report

    merge --> validate_closure
    discard --> validate_closure
    rewrite --> validate_closure
    validate_closure --> final_report
}

rectangle "FINAL STATE" #LightGreen {
    rectangle "GREEN Andon Signal ✓" as green_signal
    final_report --> green_signal
}

@enduml

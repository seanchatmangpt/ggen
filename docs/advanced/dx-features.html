<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Developer Experience - ggen Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Language-agnostic generator for reproducible code projections">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ggen Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/seanchatmangpt/ggen" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/seanchatmangpt/ggen/edit/main/docs/src/src/advanced/dx-features.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
<p><strong>Table of Contents</strong></p>
<ul>
<li><a href="#ggen-dx-features">Ggen DX Features</a>
<ul>
<li><a href="#cli-ergonomics">CLI Ergonomics</a>
<ul>
<li><a href="#one-verb-philosophy">One Verb Philosophy</a></li>
<li><a href="#auto-discovery">Auto-Discovery</a></li>
<li><a href="#variable-precedence">Variable Precedence</a></li>
<li><a href="#rich-dry-run">Rich Dry Run</a></li>
<li><a href="#execution-tracing">Execution Tracing</a></li>
</ul>
</li>
<li><a href="#marketplace-dx-features">Marketplace DX Features</a>
<ul>
<li><a href="#gpack-development-workflow">Gpack Development Workflow</a></li>
<li><a href="#gpack-testing-best-practices">Gpack Testing Best Practices</a></li>
<li><a href="#gpack-versioning-strategies">Gpack Versioning Strategies</a></li>
</ul>
</li>
<li><a href="#authoring-loop">Authoring Loop</a>
<ul>
<li><a href="#live-development-mode">Live Development Mode</a></li>
<li><a href="#gpack-development-mode">Gpack Development Mode</a></li>
<li><a href="#template-scaffolding">Template Scaffolding</a></li>
<li><a href="#template-documentation">Template Documentation</a></li>
<li><a href="#manifest-preview">Manifest Preview</a></li>
</ul>
</li>
<li><a href="#error-handling">Error Handling</a>
<ul>
<li><a href="#tera-template-errors">Tera Template Errors</a></li>
<li><a href="#frontmatter-validation-errors">Frontmatter Validation Errors</a></li>
<li><a href="#sparql-query-errors">SPARQL Query Errors</a></li>
<li><a href="#injection-errors">Injection Errors</a></li>
</ul>
</li>
<li><a href="#hygen-parity">Hygen Parity</a>
<ul>
<li><a href="#complete-frontmatter-support">Complete Frontmatter Support</a></li>
<li><a href="#regex-based-injection">Regex-Based Injection</a></li>
<li><a href="#idempotency-guarantees">Idempotency Guarantees</a></li>
</ul>
</li>
<li><a href="#determinism--previews">Determinism &amp; Previews</a>
<ul>
<li><a href="#default-diff-view">Default Diff View</a></li>
<li><a href="#content-hashing">Content Hashing</a></li>
<li><a href="#stable-ordering">Stable Ordering</a></li>
</ul>
</li>
<li><a href="#graph-rdf-integration">Graph (RDF) Integration</a>
<ul>
<li><a href="#single-shared-graph">Single Shared Graph</a></li>
<li><a href="#sparql-functions">SPARQL Functions</a></li>
<li><a href="#automatic-prolog-building">Automatic Prolog Building</a></li>
</ul>
</li>
<li><a href="#template-helpers">Template Helpers</a>
<ul>
<li><a href="#text-transformation-filters">Text Transformation Filters</a></li>
<li><a href="#built-in-functions">Built-in Functions</a></li>
</ul>
</li>
<li><a href="#safety--guardrails">Safety &amp; Guardrails</a>
<ul>
<li><a href="#safe-write-root">Safe Write Root</a></li>
<li><a href="#shell-hook-controls">Shell Hook Controls</a></li>
<li><a href="#network-restrictions">Network Restrictions</a></li>
</ul>
</li>
<li><a href="#configuration--discovery">Configuration &amp; Discovery</a>
<ul>
<li><a href="#project-configuration">Project Configuration</a></li>
<li><a href="#health-check">Health Check</a></li>
<li><a href="#path-resolution">Path Resolution</a></li>
</ul>
</li>
<li><a href="#testing-infrastructure">Testing Infrastructure</a>
<ul>
<li><a href="#golden-test-system">Golden Test System</a></li>
<li><a href="#test-organization">Test Organization</a></li>
</ul>
</li>
<li><a href="#pipeline-integration">Pipeline Integration</a>
<ul>
<li><a href="#builder-pattern">Builder Pattern</a></li>
<li><a href="#single-render-call">Single Render Call</a></li>
</ul>
</li>
<li><a href="#sensible-defaults">Sensible Defaults</a>
<ul>
<li><a href="#pre-filled-context">Pre-filled Context</a></li>
<li><a href="#flexible-output-control">Flexible Output Control</a></li>
</ul>
</li>
<li><a href="#error-recovery">Error Recovery</a>
<ul>
<li><a href="#graceful-degradation">Graceful Degradation</a></li>
<li><a href="#recovery-suggestions">Recovery Suggestions</a></li>
</ul>
</li>
<li><a href="#performance-optimizations">Performance Optimizations</a>
<ul>
<li><a href="#streaming--caching">Streaming &amp; Caching</a></li>
<li><a href="#memory-efficiency">Memory Efficiency</a></li>
</ul>
</li>
<li><a href="#development-workflow">Development Workflow</a>
<ul>
<li><a href="#rapid-iteration-cycle">Rapid Iteration Cycle</a></li>
<li><a href="#template-debugging">Template Debugging</a></li>
</ul>
</li>
<li><a href="#integration-benefits">Integration Benefits</a>
<ul>
<li><a href="#ide-support">IDE Support</a></li>
<li><a href="#tool-integration">Tool Integration</a></li>
</ul>
</li>
<li><a href="#best-practices">Best Practices</a>
<ul>
<li><a href="#template-organization">Template Organization</a></li>
<li><a href="#variable-naming">Variable Naming</a></li>
<li><a href="#error-prevention">Error Prevention</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->
<h1 id="ggen-dx-features"><a class="header" href="#ggen-dx-features">Ggen DX Features</a></h1>
<p>This document covers all developer experience features in ggen, including both marketplace and local template workflows. These features focus on ergonomics, authoring workflows, error handling, and development productivity.</p>
<h2 id="cli-ergonomics"><a class="header" href="#cli-ergonomics">CLI Ergonomics</a></h2>
<h3 id="one-verb-philosophy"><a class="header" href="#one-verb-philosophy">One Verb Philosophy</a></h3>
<pre><code class="language-bash"># Single command for everything
ggen gen &lt;template&gt; key=val ...

# No complex subcommand trees
# Just: ggen gen [template-ref] [options] [variables]
</code></pre>
<h3 id="auto-discovery"><a class="header" href="#auto-discovery">Auto-Discovery</a></h3>
<pre><code class="language-bash"># Automatically finds project configuration
cd my-project/
ggen gen cli subcommand name=hello  # Finds ggen.toml automatically

# Discovers templates directory
# Loads project-specific RDF graphs
# Merges environment variables
</code></pre>
<h3 id="variable-precedence"><a class="header" href="#variable-precedence">Variable Precedence</a></h3>
<p>Variables are resolved in this order (later values override earlier):</p>
<ol>
<li><strong>Environment variables</strong> (from <code>.env</code> files)</li>
<li><strong>System environment</strong> (<code>$HOME</code>, <code>$USER</code>, etc.)</li>
<li><strong>Project presets</strong> (from <code>ggen.toml</code> [preset] section)</li>
<li><strong>Template frontmatter</strong> (<code>vars:</code> section in template)</li>
<li><strong>CLI arguments</strong> (<code>--var key=value</code>)</li>
</ol>
<pre><code class="language-bash"># .env file
author=John Doe

# ggen.toml
[preset]
vars = { license = "MIT" }

# template frontmatter
vars:
  author: "Jane Smith"  # Overridden by CLI
  feature: "basic"

# CLI call
ggen gen cli subcommand --var author="CLI Author" --var feature="advanced"
# Result: author="CLI Author", license="MIT", feature="advanced"
</code></pre>
<h3 id="rich-dry-run"><a class="header" href="#rich-dry-run">Rich Dry Run</a></h3>
<pre><code class="language-bash"># Side-by-side diff view
ggen gen cli subcommand name=hello --dry

# Shows unified diff with context
# Displays target paths and variable summary
# No files written until you remove --dry
</code></pre>
<h3 id="execution-tracing"><a class="header" href="#execution-tracing">Execution Tracing</a></h3>
<pre><code class="language-bash"># See everything that happens during generation
GGEN_TRACE=1 ggen gen cli subcommand name=hello

# Outputs:
# === GGEN TRACE ===
# Template path: templates/cli/subcommand/rust.tmpl
# Resolved frontmatter:
# {to: "src/cmds/{{name}}.rs", vars: {name: "hello"}, ...}
# SPARQL prolog:
# @prefix cli: &lt;urn:ggen:cli#&gt; . @base &lt;http://example.org/&gt; .
# Target output path: src/cmds/hello.rs
</code></pre>
<h2 id="marketplace-dx-features"><a class="header" href="#marketplace-dx-features">Marketplace DX Features</a></h2>
<h3 id="gpack-development-workflow"><a class="header" href="#gpack-development-workflow">Gpack Development Workflow</a></h3>
<pre><code class="language-bash"># Initialize new gpack
ggen pack init

# Add templates and dependencies
mkdir -p templates/cli/subcommand
# Create template files...

# Test gpack locally
ggen pack test

# Lint for publishing
ggen pack lint

# Publish to registry
ggen pack publish
</code></pre>
<h3 id="gpack-testing-best-practices"><a class="header" href="#gpack-testing-best-practices">Gpack Testing Best Practices</a></h3>
<pre><code class="language-bash"># Run golden tests
ggen pack test

# Test with different variables
ggen gen io.ggen.rust.cli-subcommand:cli/subcommand/rust.tmpl name=test1
ggen gen io.ggen.rust.cli-subcommand:cli/subcommand/rust.tmpl name=test2

# Verify deterministic output
ggen gen io.ggen.rust.cli-subcommand:cli/subcommand/rust.tmpl name=test1
# Should produce identical output
</code></pre>
<h3 id="gpack-versioning-strategies"><a class="header" href="#gpack-versioning-strategies">Gpack Versioning Strategies</a></h3>
<pre><code class="language-bash"># Semantic versioning for gpacks
# Major.Minor.Patch
# 1.0.0 -&gt; 1.0.1 (patch: bug fixes)
# 1.0.0 -&gt; 1.1.0 (minor: new features)
# 1.0.0 -&gt; 2.0.0 (major: breaking changes)

# Update gpack version
# Edit ggen.toml:
# version = "0.2.1"

# Test before publishing
ggen pack test
ggen pack lint
</code></pre>
<h2 id="authoring-loop"><a class="header" href="#authoring-loop">Authoring Loop</a></h2>
<h3 id="live-development-mode"><a class="header" href="#live-development-mode">Live Development Mode</a></h3>
<pre><code class="language-bash"># Watch mode for rapid iteration
ggen dev --watch templates/

# Automatically re-renders when:
# - Template files change
# - Frontmatter is modified
# - RDF graphs are updated
# - SPARQL queries change

# Outputs to temp directory with live diff
# Perfect for template development
</code></pre>
<h3 id="gpack-development-mode"><a class="header" href="#gpack-development-mode">Gpack Development Mode</a></h3>
<pre><code class="language-bash"># Watch mode for gpack development
ggen pack dev --watch

# Automatically re-renders when:
# - Gpack templates change
# - Dependencies update
# - RDF graphs are modified
# - Tests need re-running

# Outputs to temp directory with live diff
# Perfect for gpack development
</code></pre>
<h3 id="template-scaffolding"><a class="header" href="#template-scaffolding">Template Scaffolding</a></h3>
<pre><code class="language-bash"># Generate new template with sensible defaults
ggen new template cli/subcommand/typescript

# Creates:
# templates/cli/subcommand/typescript.tmpl
# With standard frontmatter structure
# Includes example RDF and SPARQL
# Ready for customization
</code></pre>
<h3 id="template-documentation"><a class="header" href="#template-documentation">Template Documentation</a></h3>
<pre><code class="language-bash"># Get help for any template
ggen help cli/subcommand/rust.tmpl

# Shows:
# Template: cli/subcommand/rust.tmpl
# Description: Generate Rust CLI subcommand
# Required Variables:
#   name (string): Subcommand name
#   description (string): Help text
# Optional Variables:
#   author (string): Code author
# Examples:
#   ggen gen cli/subcommand/rust.tmpl name=status description="Show status"
# Dependencies:
#   RDF: graphs/cli.ttl
#   Queries: SELECT ?name ?description WHERE { ?cmd rdfs:label ?name }
</code></pre>
<h3 id="manifest-preview"><a class="header" href="#manifest-preview">Manifest Preview</a></h3>
<pre><code class="language-bash"># See what would be generated without running templates
ggen plan cli subcommand

# Shows:
# Would generate:
#   src/cmds/hello.rs (from templates/cli/subcommand/rust.tmpl)
#   src/cmds/goodbye.rs (from templates/cli/subcommand/rust.tmpl)
#   commands/hello.py (from templates/cli/subcommand/python.tmpl)
#
# Variables applied:
#   name=hello, description="Say hello"
#   name=goodbye, description="Say goodbye"
</code></pre>
<h2 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h2>
<h3 id="tera-template-errors"><a class="header" href="#tera-template-errors">Tera Template Errors</a></h3>
<pre><code class="language-bash"># File:line:col with 5-line snippet and highlighted token
Error in templates/api/endpoint/rust.tmpl:12:8
   |
10 | pub struct {{name|pascal}}Handler {
11 |     // TODO: Add fields
12 |     pub {{field_name}
   |           ^^^^^^^^
   |
Expected closing `}}` for variable `field_name`

Suggestion: Add `}}` after field_name
</code></pre>
<h3 id="frontmatter-validation-errors"><a class="header" href="#frontmatter-validation-errors">Frontmatter Validation Errors</a></h3>
<pre><code class="language-bash"># Path.to.field with expected type and example
Error in templates/cli/subcommand/rust.tmpl frontmatter:
  .rdf[0] : Expected string, found array

  Expected format:
  rdf:
    - "graphs/cli.ttl"

  Got:
  rdf:
    - ["graphs/cli.ttl"]

Suggestion: Use string instead of array for single file
</code></pre>
<h3 id="sparql-query-errors"><a class="header" href="#sparql-query-errors">SPARQL Query Errors</a></h3>
<pre><code class="language-bash"># Shows prepended prolog and failing variable binding
SPARQL Error in templates/api/endpoint/rust.tmpl:
Query:
  @prefix api: &lt;urn:ggen:api#&gt; .
  @base &lt;http://example.org/&gt; .
  SELECT ?name ?type WHERE {
    ?endpoint a api:Endpoint .
    ?endpoint api:name ?name .
    ?endpoint api:type ?type
  }

Variable binding failed for ?type:
  No value found for variable 'type' in graph

Suggestion: Check RDF data or query pattern
Available variables: ?name, ?endpoint
</code></pre>
<h3 id="injection-errors"><a class="header" href="#injection-errors">Injection Errors</a></h3>
<pre><code class="language-bash"># Shows first non-matching context lines and regex used
Injection Error in src/main.rs:
Pattern 'fn main\(\) {' not found in file

Context (first 10 lines):
  1 | use std::env;
  2 |
  3 | fn main() {
  4 |     println!("Hello, world!");
  5 | }

Regex used: fn main\(\) \{

Suggestion: Check if pattern exists in target file
Try: --dry to preview injection before applying
</code></pre>
<h2 id="hygen-parity"><a class="header" href="#hygen-parity">Hygen Parity</a></h2>
<h3 id="complete-frontmatter-support"><a class="header" href="#complete-frontmatter-support">Complete Frontmatter Support</a></h3>
<p>All Hygen frontmatter keys supported 1:1:</p>
<pre><code class="language-yaml">---
to: "src/{{type}}s/{{name}}.rs"           # Output path
from: "templates/base.rs"                  # Source template
force: true                               # Overwrite existing
unless_exists: true                       # Skip if exists
inject: true                              # Enable injection mode
before: "// Existing content"             # Inject before pattern
after: "fn main() {"                      # Inject after pattern
prepend: true                             # Prepend to file
append: true                              # Append to file
at_line: 10                               # Inject at line number
eof_last: true                            # Inject before EOF
skip_if: "// GENERATED"                   # Skip if pattern found
sh_before: "echo 'Generating...'"         # Pre-generation shell
sh_after: "cargo fmt"                     # Post-generation shell
---
</code></pre>
<h3 id="regex-based-injection"><a class="header" href="#regex-based-injection">Regex-Based Injection</a></h3>
<pre><code class="language-bash"># Compiled once for performance
# Deterministic first-match behavior
# All injection modes use regex patterns

# Inject before existing function
before: "fn existing_function\(\) {"

# Inject after struct definition
after: "struct ExistingStruct \{[^}]*\}"

# Skip if already injected
skip_if: "// GENERATED CODE"
</code></pre>
<h3 id="idempotency-guarantees"><a class="header" href="#idempotency-guarantees">Idempotency Guarantees</a></h3>
<pre><code class="language-bash"># Checked before any write operation
# Echo reason in dry-run mode

# If skip_if pattern found:
#   → Skip injection entirely
#   → Log: "Skipped injection: pattern found"

# If unless_exists and file exists:
#   → Skip generation entirely
#   → Log: "Skipped generation: file exists"
</code></pre>
<h2 id="determinism--previews"><a class="header" href="#determinism--previews">Determinism &amp; Previews</a></h2>
<h3 id="default-diff-view"><a class="header" href="#default-diff-view">Default Diff View</a></h3>
<pre><code class="language-bash"># Diff shown by default in --dry mode
ggen gen cli subcommand name=hello --dry

# Unified diff format:
# --- templates/cli/subcommand/rust.tmpl
# +++ would generate: src/cmds/hello.rs
# @@ -1,4 +1,4 @@
# -use utils::error::Result;
# +use utils::error::Result;
# +
# +#[derive(clap::Args, Debug)]
# +pub struct HelloArgs {
# +    /// Name to greet
# +    #[arg(short, long, default_value = "World")]
# +    pub name: String,
# +}
</code></pre>
<h3 id="content-hashing"><a class="header" href="#content-hashing">Content Hashing</a></h3>
<pre><code class="language-bash"># Printed after successful write
ggen gen cli subcommand name=hello

# Output:
# Generated: src/cmds/hello.rs
# Content hash: sha256:a1b2c3d4e5f6...

# Same inputs → identical bytes
# Enables caching and change detection
</code></pre>
<h3 id="stable-ordering"><a class="header" href="#stable-ordering">Stable Ordering</a></h3>
<pre><code class="language-bash"># --idempotency-key seeds stable ordering
ggen gen cli subcommand --idempotency-key "my-project"

# Multi-file generation produces consistent output order
# Same key → same file ordering across runs
</code></pre>
<h2 id="graph-rdf-integration"><a class="header" href="#graph-rdf-integration">Graph (RDF) Integration</a></h2>
<h3 id="single-shared-graph"><a class="header" href="#single-shared-graph">Single Shared Graph</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// One Graph instance per pipeline run
// Preloads project + template RDF once
// Cached query results for performance

let mut pipeline = Pipeline::new()?;
pipeline.load_rdf("graphs/project.ttl")?;
pipeline.load_rdf("graphs/cli.ttl")?;
<span class="boring">}</span></code></pre></pre>
<h3 id="sparql-functions"><a class="header" href="#sparql-functions">SPARQL Functions</a></h3>
<pre><code class="language-tera">// In templates:
{{ sparql(query="SELECT ?name WHERE { ?cmd rdfs:label ?name }") }}

// Named queries with parameters:
{{ sparql_named(name="command_by_name", var="name=hello") }}

// Results available as JSON in templates
{% for cmd in sparql_results %}
pub struct {{cmd.name}}Args;
{% endfor %}
</code></pre>
<h3 id="automatic-prolog-building"><a class="header" href="#automatic-prolog-building">Automatic Prolog Building</a></h3>
<pre><code class="language-yaml"># Frontmatter automatically builds prolog:
prefixes:
  cli: "urn:ggen:cli#"
  ex: "http://example.org/"

base: "http://example.org/"

# Generates:
# @prefix cli: &lt;urn:ggen:cli#&gt; .
# @prefix ex: &lt;http://example.org/&gt; .
# @base &lt;http://example.org/&gt; .
</code></pre>
<h2 id="template-helpers"><a class="header" href="#template-helpers">Template Helpers</a></h2>
<h3 id="text-transformation-filters"><a class="header" href="#text-transformation-filters">Text Transformation Filters</a></h3>
<pre><code class="language-tera">// All Inflector + Heck filters available:
{{ name | camel }}           // userName
{{ name | pascal }}          // UserName
{{ name | snake }}           // user_name
{{ name | kebab }}           // user-name
{{ name | shouty_snake }}    // USER_NAME
{{ name | plural }}          // users
{{ name | singular }}        // user
</code></pre>
<h3 id="built-in-functions"><a class="header" href="#built-in-functions">Built-in Functions</a></h3>
<pre><code class="language-tera">// Local name from IRI
{{ local(iri="&lt;http://example.org/User&gt;") }}  // "User"

// Slug generation
{{ slug(text="Hello World!") }}              // "hello-world"

// Indentation control
{{ indent(text="line1\nline2", n=2) }}       // "  line1\n  line2"

// Newline insertion
{{ newline(n=3) }}                           // "\n\n\n"
</code></pre>
<h2 id="safety--guardrails"><a class="header" href="#safety--guardrails">Safety &amp; Guardrails</a></h2>
<h3 id="safe-write-root"><a class="header" href="#safe-write-root">Safe Write Root</a></h3>
<pre><code class="language-bash"># Safe write root = current directory
ggen gen cli subcommand name=hello

# Generates: ./src/cmds/hello.rs
# Cannot write outside project root

# Override with --unsafe-write (requires explicit opt-in)
ggen gen cli subcommand name=hello --unsafe-write /tmp/output
</code></pre>
<h3 id="shell-hook-controls"><a class="header" href="#shell-hook-controls">Shell Hook Controls</a></h3>
<pre><code class="language-yaml"># Off by default for security
sh_before: "echo 'Generating...'"    # Not executed
sh_after: "cargo fmt"                # Not executed

# Enable with --allow-sh flag
ggen gen template --allow-sh

# Always preview in --dry mode
ggen gen template --dry --allow-sh  # Shows what shell commands would run
</code></pre>
<h3 id="network-restrictions"><a class="header" href="#network-restrictions">Network Restrictions</a></h3>
<pre><code class="language-bash"># No network during render by default
# Prevents malicious template behavior

# Enable network for gpack fetching only
ggen add io.ggen.rust.cli-subcommand --net

# Network only for registry operations
# Templates cannot make HTTP requests
</code></pre>
<h2 id="configuration--discovery"><a class="header" href="#configuration--discovery">Configuration &amp; Discovery</a></h2>
<h3 id="project-configuration"><a class="header" href="#project-configuration">Project Configuration</a></h3>
<pre><code class="language-toml"># ggen.toml - single source of project config
[project]
name = "My CLI Tool"
version = "0.1.0"

[prefixes]
ex = "http://example.org/"

[rdf]
files = ["templates/**/graphs/*.ttl"]
inline = ["@prefix ex: &lt;http://example.org/&gt; . ex:Project a ex:Tool ."]

[preset]
vars = { author = "Team", license = "MIT" }
</code></pre>
<h3 id="health-check"><a class="header" href="#health-check">Health Check</a></h3>
<pre><code class="language-bash"># Validate entire project setup
ggen doctor

# Checks:
# ✓ ggen.toml syntax
# ✓ Template frontmatter validity
# ✓ RDF graph well-formedness
# ✓ SPARQL query syntax
# ✓ File path resolution
# ✓ Gpack compatibility
</code></pre>
<h3 id="path-resolution"><a class="header" href="#path-resolution">Path Resolution</a></h3>
<pre><code class="language-bash"># All paths resolved relative to ggen.toml location
# Printed in --trace mode for debugging

# Project structure:
# my-project/
#   ggen.toml
#   graphs/cli.ttl
#   templates/cli/subcommand/rust.tmpl

# Paths automatically resolved:
# graphs/cli.ttl → /path/to/my-project/graphs/cli.ttl
# templates/cli/subcommand/rust.tmpl → /path/to/my-project/templates/cli/subcommand/rust.tmpl
</code></pre>
<h2 id="testing-infrastructure"><a class="header" href="#testing-infrastructure">Testing Infrastructure</a></h2>
<h3 id="golden-test-system"><a class="header" href="#golden-test-system">Golden Test System</a></h3>
<pre><code class="language-bash"># Run golden tests for specific template
ggen test cli/subcommand/rust.tmpl

# Test structure:
# tests/golden/cli/subcommand/rust.tmpl/
#   input.toml     # Variables for test
#   output.rs      # Expected output

# Update goldens after changes
ggen test cli/subcommand/rust.tmpl --update-goldens
</code></pre>
<h3 id="test-organization"><a class="header" href="#test-organization">Test Organization</a></h3>
<pre><code class="language-toml"># tests/golden/cli/subcommand/rust.tmpl/input.toml
name = "hello"
description = "Print a greeting"
author = "Team"

# Generates and compares against:
# tests/golden/cli/subcommand/rust.tmpl/output.rs
</code></pre>
<h2 id="pipeline-integration"><a class="header" href="#pipeline-integration">Pipeline Integration</a></h2>
<h3 id="builder-pattern"><a class="header" href="#builder-pattern">Builder Pattern</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// Fluent API for pipeline configuration
let pipeline = Pipeline::builder()
    .with_rdf("graphs/project.ttl")
    .with_prefixes([("ex", "http://example.org/")])
    .with_templates_dir("custom-templates")
    .with_cache_strategy(CacheStrategy::Memory)
    .build()?;
<span class="boring">}</span></code></pre></pre>
<h3 id="single-render-call"><a class="header" href="#single-render-call">Single Render Call</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// One method handles everything
let plan = pipeline.render_file(
    "templates/cli/subcommand/rust.tmpl",
    &amp;variables,
    DryRun::No
)?;

// Apply or preview
plan.apply()?;           // Write files
plan.print_diff()?;      // Show diff
<span class="boring">}</span></code></pre></pre>
<h2 id="sensible-defaults"><a class="header" href="#sensible-defaults">Sensible Defaults</a></h2>
<h3 id="pre-filled-context"><a class="header" href="#pre-filled-context">Pre-filled Context</a></h3>
<pre><code class="language-tera">// Available in all templates:
{{ cwd }}              // Current working directory
{{ env.HOME }}         // User home directory
{{ git.branch }}       // Current git branch
{{ git.user }}         // Git user name
{{ now }}              // RFC3339 timestamp
</code></pre>
<h3 id="flexible-output-control"><a class="header" href="#flexible-output-control">Flexible Output Control</a></h3>
<pre><code class="language-yaml"># to: can be null to skip file generation
to: null               # No file written

# from: overrides template body
from: "base-template.rs"  # Use different source

# Works with all injection modes
inject: true
before: "fn main() {"
</code></pre>
<h2 id="error-recovery"><a class="header" href="#error-recovery">Error Recovery</a></h2>
<h3 id="graceful-degradation"><a class="header" href="#graceful-degradation">Graceful Degradation</a></h3>
<pre><code class="language-bash"># Missing optional RDF → continues with empty graph
# Invalid SPARQL query → shows helpful error
# Template syntax error → precise location + suggestion
# Path traversal attempt → clear security message
</code></pre>
<h3 id="recovery-suggestions"><a class="header" href="#recovery-suggestions">Recovery Suggestions</a></h3>
<pre><code class="language-bash"># Every error includes actionable next steps
Error: Template 'missing.tmpl' not found
Suggestion: Available templates:
  - cli/subcommand/rust.tmpl
  - api/endpoint/typescript.tmpl
  - Run 'ggen list' to see all options
</code></pre>
<h2 id="performance-optimizations"><a class="header" href="#performance-optimizations">Performance Optimizations</a></h2>
<h3 id="streaming--caching"><a class="header" href="#streaming--caching">Streaming &amp; Caching</a></h3>
<pre><code class="language-bash"># Large RDF graphs processed incrementally
# Repeated queries cached automatically
# Template compilation cached per-run
# File I/O batched for efficiency
</code></pre>
<h3 id="memory-efficiency"><a class="header" href="#memory-efficiency">Memory Efficiency</a></h3>
<pre><code class="language-bash"># Bounded caches prevent memory leaks
# Stream processing for large files
# Minimal allocations in hot paths
# LTO enabled in release builds
</code></pre>
<h2 id="development-workflow"><a class="header" href="#development-workflow">Development Workflow</a></h2>
<h3 id="rapid-iteration-cycle"><a class="header" href="#rapid-iteration-cycle">Rapid Iteration Cycle</a></h3>
<pre><code class="language-bash"># 1. Edit template
# 2. Test with --dry
# 3. Check --trace output
# 4. Iterate quickly

ggen gen template --dry --trace
# → See exactly what happens
# → Fix issues immediately
# → No waiting for file writes
</code></pre>
<h3 id="template-debugging"><a class="header" href="#template-debugging">Template Debugging</a></h3>
<pre><code class="language-bash"># Debug template logic step by step
GGEN_TRACE=1 ggen gen template

# See:
# - Frontmatter resolution
# - Variable precedence
# - SPARQL query execution
# - Template rendering
# - File path calculation
</code></pre>
<h2 id="integration-benefits"><a class="header" href="#integration-benefits">Integration Benefits</a></h2>
<h3 id="ide-support"><a class="header" href="#ide-support">IDE Support</a></h3>
<pre><code class="language-bash"># Rich error messages work in IDEs
# Template syntax highlighting
# Variable name completion
# Live preview of generated code
# Source maps for debugging
</code></pre>
<h3 id="tool-integration"><a class="header" href="#tool-integration">Tool Integration</a></h3>
<pre><code class="language-bash"># JSON output for CI/CD
ggen gen template --dry --json &gt; plan.json

# Machine-readable error format
# Structured logging for dashboards
# Metrics collection hooks
</code></pre>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="template-organization"><a class="header" href="#template-organization">Template Organization</a></h3>
<pre><code class="language-bash">templates/
  cli/
    subcommand/
      rust.tmpl
      python.tmpl
      bash.tmpl
  api/
    endpoint/
      rust.tmpl
      typescript.tmpl
  component/
    mod.rs.tmpl
</code></pre>
<h3 id="variable-naming"><a class="header" href="#variable-naming">Variable Naming</a></h3>
<pre><code class="language-yaml"># Use descriptive variable names
vars:
  component_name: "UserService"
  api_version: "v1"
  author_email: "team@example.com"

# Avoid generic names like 'name', 'type'
# Use domain-specific names
</code></pre>
<h3 id="error-prevention"><a class="header" href="#error-prevention">Error Prevention</a></h3>
<pre><code class="language-yaml"># Validate early with schemas
# Use RDF shapes for data validation
# Test templates with golden tests
# Use --dry before --allow-sh
</code></pre>
<p>This comprehensive DX system provides fast feedback, predictable outputs, clear error messages, and zero ceremony—exactly the developer experience lift that covers 80% of use cases while maintaining the power and flexibility needed for complex scenarios.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../advanced/calculus.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../advanced/gpack-development.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../advanced/calculus.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../advanced/gpack-development.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>

<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Hooks &amp; Automation - ggen Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Language-agnostic generator for reproducible code projections">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ggen Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/seanchatmangpt/ggen" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/seanchatmangpt/ggen/edit/main/docs/src/src/guides/hooks.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="hooks-system-guide"><a class="header" href="#hooks-system-guide">Hooks System Guide</a></h1>
<p><strong>ggen v2.5.0</strong> | <strong>Automation &amp; Workflows</strong> | <strong>Event-Driven Development</strong></p>
<hr />
<h2 id="overview"><a class="header" href="#overview">Overview</a></h2>
<p>The ggen <strong>Hooks System</strong> enables <strong>automated workflows</strong> triggered by specific events during code generation. Think of hooks as programmable automation points that execute custom scripts whenever certain actions occur.</p>
<h3 id="key-benefits"><a class="header" href="#key-benefits">Key Benefits</a></h3>
<ul>
<li>✅ <strong>Automated quality checks</strong> (lint, format, test)</li>
<li>✅ <strong>Continuous regeneration</strong> (ontology changes → code updates)</li>
<li>✅ <strong>Pre-commit validation</strong> (prevent bad code from being committed)</li>
<li>✅ <strong>Post-generation tasks</strong> (documentation, deployment)</li>
<li>✅ <strong>Custom workflows</strong> (notifications, backups, CI/CD triggers)</li>
</ul>
<hr />
<h2 id="table-of-contents"><a class="header" href="#table-of-contents">Table of Contents</a></h2>
<ul>
<li><a href="#quick-start">Quick Start</a></li>
<li><a href="#hook-events">Hook Events</a></li>
<li><a href="#command-reference">Command Reference</a></li>
<li><a href="#common-workflows">Common Workflows</a></li>
<li><a href="#best-practices">Best Practices</a></li>
<li><a href="#advanced-patterns">Advanced Patterns</a></li>
<li><a href="#troubleshooting">Troubleshooting</a></li>
</ul>
<hr />
<h2 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h2>
<h3 id="create-your-first-hook"><a class="header" href="#create-your-first-hook">Create Your First Hook</a></h3>
<pre><code class="language-bash"># 1. Create a script that runs after code generation
cat &gt; format-code.sh &lt;&lt; 'EOF'
#!/bin/bash
echo "Auto-formatting generated code..."
cargo make fmt
cargo make lint
echo "Formatting complete!"
EOF

chmod +x format-code.sh

# 2. Register the hook
ggen hook create \
  --event post-generate \
  --script ./format-code.sh \
  --name "auto-format"

# 3. Verify it's registered
ggen hook list
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{
  "hooks": [
    {
      "id": "hook_abc123",
      "trigger": "post-generate",
      "action": "./format-code.sh",
      "created_at": "2025-11-07T12:00:00Z"
    }
  ],
  "total": 1
}
</code></pre>
<h3 id="test-your-hook"><a class="header" href="#test-your-hook">Test Your Hook</a></h3>
<pre><code class="language-bash"># Generate code - your hook will run automatically
ggen project gen test-project --graph domain.ttl

# Watch for hook execution in output
# → "Auto-formatting generated code..."
# → "Formatting complete!"
</code></pre>
<hr />
<h2 id="hook-events"><a class="header" href="#hook-events">Hook Events</a></h2>
<p>ggen supports <strong>6 primary event types</strong> for automation:</p>
<h3 id="1-post-generate"><a class="header" href="#1-post-generate">1. <code>post-generate</code></a></h3>
<p><strong>Triggers:</strong> After code generation completes</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Auto-format generated code</li>
<li>Run linters and static analysis</li>
<li>Generate documentation</li>
<li>Update package metadata</li>
<li>Run initial tests</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">ggen hook create \
  --event post-generate \
  --script ./scripts/post-gen.sh \
  --name "post-generation-tasks"
</code></pre>
<p><strong>Script Template:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# post-gen.sh

echo "Running post-generation tasks..."

# Format code
cargo make fmt

# Run clippy
cargo make lint

# Generate docs
cargo doc --no-deps

# Update README
ggen ai generate "Update README with new features" \
  --code "$(cat README.md)" &gt; README.md

echo "Post-generation complete!"
</code></pre>
<hr />
<h3 id="2-pre-commit"><a class="header" href="#2-pre-commit">2. <code>pre-commit</code></a></h3>
<p><strong>Triggers:</strong> Before Git commit (requires Git hooks integration)</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Validate code quality</li>
<li>Run tests</li>
<li>Check formatting</li>
<li>Verify ontology consistency</li>
<li>Prevent broken code from being committed</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">ggen hook create \
  --event pre-commit \
  --script ./scripts/pre-commit.sh \
  --name "commit-validation"
</code></pre>
<p><strong>Script Template:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# pre-commit.sh

set -e  # Exit on first error

echo "Running pre-commit checks..."

# 1. Validate ontology
echo "Validating ontology..."
ggen graph load domain.ttl

# 2. Run tests
echo "Running tests..."
cargo make test

# 3. Check formatting
echo "Checking formatting..."
cargo make fmt

# 4. Run clippy
echo "Running clippy..."
cargo make lint

# 5. Build
echo "Building project..."
cargo build --release

echo "All pre-commit checks passed!"
</code></pre>
<hr />
<h3 id="3-on-ontology-change"><a class="header" href="#3-on-ontology-change">3. <code>on-ontology-change</code></a></h3>
<p><strong>Triggers:</strong> When RDF ontology files are modified</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Automatically regenerate code</li>
<li>Update database schema</li>
<li>Regenerate API documentation</li>
<li>Notify team of domain changes</li>
<li>Trigger CI/CD pipeline</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">ggen hook create \
  --event on-ontology-change \
  --script ./scripts/regen-on-change.sh \
  --name "auto-regenerate"
</code></pre>
<p><strong>Script Template:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# regen-on-change.sh

CHANGED_FILE=$1  # Passed by hook system

echo "Ontology changed: $CHANGED_FILE"
echo "Regenerating code..."

# Backup current code
BACKUP_DIR="backups/$(date +%Y%m%d_%H%M%S)"
mkdir -p "$BACKUP_DIR"
cp -r src "$BACKUP_DIR/"

# Regenerate from updated ontology
ggen project gen . \
  --graph "$CHANGED_FILE" \
  --force

# Run tests to verify regeneration
cargo test || {
  echo "Tests failed! Restoring backup..."
  rm -rf src
  cp -r "$BACKUP_DIR/src" .
  exit 1
}

echo "Regeneration successful!"
</code></pre>
<hr />
<h3 id="4-pre-build"><a class="header" href="#4-pre-build">4. <code>pre-build</code></a></h3>
<p><strong>Triggers:</strong> Before compilation/build process</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Code generation</li>
<li>Asset compilation</li>
<li>Environment validation</li>
<li>Dependency checks</li>
<li>Configuration generation</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">ggen hook create \
  --event pre-build \
  --script ./scripts/pre-build.sh \
  --name "build-preparation"
</code></pre>
<p><strong>Script Template:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# pre-build.sh

echo "Pre-build tasks..."

# 1. Check environment
ggen utils doctor

# 2. Generate build-time code
ggen ai generate "Generate build metadata" &gt; src/build_info.rs

# 3. Update version
VERSION=$(cargo metadata --format-version 1 | jq -r '.packages[0].version')
echo "Building version: $VERSION"

# 4. Verify dependencies
cargo fetch

echo "Pre-build complete!"
</code></pre>
<hr />
<h3 id="5-post-deploy"><a class="header" href="#5-post-deploy">5. <code>post-deploy</code></a></h3>
<p><strong>Triggers:</strong> After deployment to production</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Update live documentation</li>
<li>Send notifications</li>
<li>Generate metrics</li>
<li>Archive artifacts</li>
<li>Update status pages</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">ggen hook create \
  --event post-deploy \
  --script ./scripts/post-deploy.sh \
  --name "deployment-tasks"
</code></pre>
<p><strong>Script Template:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# post-deploy.sh

ENVIRONMENT=$1  # staging | production
VERSION=$2

echo "Deployed $VERSION to $ENVIRONMENT"

# 1. Update documentation site
if [ "$ENVIRONMENT" = "production" ]; then
  cargo doc --no-deps
  rsync -avz target/doc/ docs.example.com:/var/www/docs/
fi

# 2. Send Slack notification
curl -X POST https://hooks.slack.com/services/YOUR/WEBHOOK/URL \
  -H 'Content-Type: application/json' \
  -d "{\"text\": \"Deployed $VERSION to $ENVIRONMENT\"}"

# 3. Record deployment
echo "$(date): $VERSION deployed to $ENVIRONMENT" &gt;&gt; deployment.log

echo "Post-deployment tasks complete!"
</code></pre>
<hr />
<h3 id="6-on-test-fail"><a class="header" href="#6-on-test-fail">6. <code>on-test-fail</code></a></h3>
<p><strong>Triggers:</strong> When test suite fails</p>
<p><strong>Use Cases:</strong></p>
<ul>
<li>Create bug reports</li>
<li>Notify developers</li>
<li>Collect diagnostic information</li>
<li>Rollback changes</li>
<li>Generate failure reports</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-bash">ggen hook create \
  --event on-test-fail \
  --script ./scripts/test-failure.sh \
  --name "handle-test-failures"
</code></pre>
<p><strong>Script Template:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# test-failure.sh

TEST_OUTPUT=$1

echo "Tests failed! Collecting diagnostics..."

# 1. Save test output
mkdir -p test-failures
FAILURE_FILE="test-failures/$(date +%Y%m%d_%H%M%S).log"
echo "$TEST_OUTPUT" &gt; "$FAILURE_FILE"

# 2. Analyze with AI
ggen ai analyze --project . --complexity --security &gt; analysis.json

# 3. Create GitHub issue (if in CI)
if [ -n "$GITHUB_ACTIONS" ]; then
  gh issue create \
    --title "Test Failure: $(date)" \
    --body "$(cat $FAILURE_FILE)" \
    --label "test-failure"
fi

# 4. Notify team
curl -X POST https://hooks.slack.com/services/YOUR/WEBHOOK/URL \
  -H 'Content-Type: application/json' \
  -d "{\"text\": \"Test failure detected. See $FAILURE_FILE\"}"

echo "Diagnostics collected in $FAILURE_FILE"
</code></pre>
<hr />
<h2 id="command-reference"><a class="header" href="#command-reference">Command Reference</a></h2>
<h3 id="ggen-hook-create"><a class="header" href="#ggen-hook-create"><code>ggen hook create</code></a></h3>
<p><strong>Create a new hook</strong></p>
<h4 id="syntax"><a class="header" href="#syntax">Syntax</a></h4>
<pre><code class="language-bash">ggen hook create --event &lt;event&gt; --script &lt;path&gt; --name &lt;name&gt;
</code></pre>
<h4 id="options"><a class="header" href="#options">Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Required</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--event</code></td><td>✅</td><td>enum</td><td>Event trigger (see <a href="#hook-events">Hook Events</a>)</td></tr>
<tr><td><code>--script</code></td><td>✅</td><td>path</td><td>Path to executable script</td></tr>
<tr><td><code>--name</code></td><td>Optional</td><td>string</td><td>Human-readable hook name</td></tr>
</tbody></table>
</div>
<h4 id="examples"><a class="header" href="#examples">Examples</a></h4>
<pre><code class="language-bash"># Basic hook creation
ggen hook create \
  --event post-generate \
  --script ./format.sh

# With custom name
ggen hook create \
  --event pre-commit \
  --script ./validate.sh \
  --name "pre-commit-validator"
</code></pre>
<hr />
<h3 id="ggen-hook-list"><a class="header" href="#ggen-hook-list"><code>ggen hook list</code></a></h3>
<p><strong>List all registered hooks</strong></p>
<h4 id="syntax-1"><a class="header" href="#syntax-1">Syntax</a></h4>
<pre><code class="language-bash">ggen hook list [OPTIONS]
</code></pre>
<h4 id="options-1"><a class="header" href="#options-1">Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--filter</code></td><td>string</td><td>-</td><td>Filter by event type</td></tr>
<tr><td><code>--verbose</code></td><td>bool</td><td>false</td><td>Show detailed information</td></tr>
</tbody></table>
</div>
<h4 id="examples-1"><a class="header" href="#examples-1">Examples</a></h4>
<pre><code class="language-bash"># List all hooks
ggen hook list

# Filter by event type
ggen hook list --filter post-generate

# Verbose output
ggen hook list --verbose
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{
  "hooks": [
    {
      "id": "hook_abc123",
      "trigger": "post-generate",
      "action": "./format.sh",
      "created_at": "2025-11-07T12:00:00Z"
    },
    {
      "id": "hook_def456",
      "trigger": "pre-commit",
      "action": "./validate.sh",
      "created_at": "2025-11-07T12:05:00Z"
    }
  ],
  "total": 2
}
</code></pre>
<hr />
<h3 id="ggen-hook-remove"><a class="header" href="#ggen-hook-remove"><code>ggen hook remove</code></a></h3>
<p><strong>Remove a hook</strong></p>
<h4 id="syntax-2"><a class="header" href="#syntax-2">Syntax</a></h4>
<pre><code class="language-bash">ggen hook remove &lt;hook-id&gt; [OPTIONS]
</code></pre>
<h4 id="arguments"><a class="header" href="#arguments">Arguments</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Argument</th><th>Required</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;hook-id&gt;</code></td><td>✅</td><td>Hook ID from <code>ggen hook list</code></td></tr>
</tbody></table>
</div>
<h4 id="options-2"><a class="header" href="#options-2">Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--force</code></td><td>bool</td><td>false</td><td>Skip confirmation prompt</td></tr>
</tbody></table>
</div>
<h4 id="examples-2"><a class="header" href="#examples-2">Examples</a></h4>
<pre><code class="language-bash"># Remove with confirmation
ggen hook remove hook_abc123

# Force removal (no prompt)
ggen hook remove hook_abc123 --force
</code></pre>
<hr />
<h3 id="ggen-hook-monitor"><a class="header" href="#ggen-hook-monitor"><code>ggen hook monitor</code></a></h3>
<p><strong>Monitor hook activity in real-time</strong></p>
<h4 id="syntax-3"><a class="header" href="#syntax-3">Syntax</a></h4>
<pre><code class="language-bash">ggen hook monitor [OPTIONS]
</code></pre>
<h4 id="options-3"><a class="header" href="#options-3">Options</a></h4>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Type</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--graph</code></td><td>path</td><td>-</td><td>Monitor specific ontology file</td></tr>
<tr><td><code>--interval</code></td><td>int</td><td>1000</td><td>Polling interval (ms)</td></tr>
<tr><td><code>--once</code></td><td>bool</td><td>false</td><td>Check once and exit</td></tr>
</tbody></table>
</div>
<h4 id="examples-3"><a class="header" href="#examples-3">Examples</a></h4>
<pre><code class="language-bash"># Monitor all hooks
ggen hook monitor

# Monitor ontology changes
ggen hook monitor --graph domain.ttl

# Single check
ggen hook monitor --once
</code></pre>
<p><strong>Output:</strong></p>
<pre><code class="language-json">{
  "active_hooks": 3,
  "watching": 1,
  "hooks": [
    {
      "id": "hook_abc123",
      "trigger": "on-ontology-change",
      "action": "./regen.sh",
      "created_at": "2025-11-07T12:00:00Z"
    }
  ]
}
</code></pre>
<hr />
<h2 id="common-workflows"><a class="header" href="#common-workflows">Common Workflows</a></h2>
<h3 id="workflow-1-continuous-code-quality"><a class="header" href="#workflow-1-continuous-code-quality">Workflow 1: Continuous Code Quality</a></h3>
<p><strong>Goal:</strong> Automatically format and lint all generated code</p>
<pre><code class="language-bash"># 1. Create format script
cat &gt; format-and-lint.sh &lt;&lt; 'EOF'
#!/bin/bash
set -e

echo "Formatting code..."
cargo make fmt

echo "Running clippy..."
cargo make lint

echo "Checking for security issues..."
cargo audit

echo "Code quality checks complete!"
EOF

chmod +x format-and-lint.sh

# 2. Register hook
ggen hook create \
  --event post-generate \
  --script ./format-and-lint.sh \
  --name "code-quality"

# 3. Test by generating code
ggen project gen test-app --graph domain.ttl
# → Automatically formats and lints!
</code></pre>
<hr />
<h3 id="workflow-2-ontology-driven-development"><a class="header" href="#workflow-2-ontology-driven-development">Workflow 2: Ontology-Driven Development</a></h3>
<p><strong>Goal:</strong> Automatically regenerate code when ontology changes</p>
<pre><code class="language-bash"># 1. Create regeneration script
cat &gt; auto-regen.sh &lt;&lt; 'EOF'
#!/bin/bash
ONTOLOGY_FILE=$1

echo "Ontology changed: $ONTOLOGY_FILE"

# Backup current code
mkdir -p .backups
tar -czf ".backups/$(date +%Y%m%d_%H%M%S).tar.gz" src/

# Regenerate
ggen project gen . --graph "$ONTOLOGY_FILE" --force

# Verify with tests
if cargo test; then
  echo "Regeneration successful!"
  git add .
  git commit -m "feat: Regenerate from ontology changes"
else
  echo "Tests failed! Check regenerated code."
  exit 1
fi
EOF

chmod +x auto-regen.sh

# 2. Register hook
ggen hook create \
  --event on-ontology-change \
  --script ./auto-regen.sh \
  --name "auto-regenerate"

# 3. Monitor ontology
ggen hook monitor --graph domain.ttl &amp;

# 4. Edit ontology
vim domain.ttl  # Save changes
# → Code automatically regenerates!
</code></pre>
<hr />
<h3 id="workflow-3-pre-commit-validation"><a class="header" href="#workflow-3-pre-commit-validation">Workflow 3: Pre-Commit Validation</a></h3>
<p><strong>Goal:</strong> Prevent broken code from being committed</p>
<pre><code class="language-bash"># 1. Create validation script
cat &gt; validate-commit.sh &lt;&lt; 'EOF'
#!/bin/bash
set -e

echo "Running pre-commit validation..."

# 1. Validate ontology syntax
if [ -f domain.ttl ]; then
  ggen graph load domain.ttl || exit 1
fi

# 2. Check formatting
cargo make fmt || {
  echo "Code not formatted! Run: cargo make fmt"
  exit 1
}

# 3. Run clippy
cargo make lint || {
  echo "Clippy warnings detected!"
  exit 1
}

# 4. Run tests
cargo make test || {
  echo "Tests failed!"
  exit 1
}

# 5. Check for TODO/FIXME
if git diff --cached | grep -E "TODO|FIXME"; then
  echo "Warning: Committing code with TODO/FIXME"
fi

echo "Pre-commit validation passed!"
EOF

chmod +x validate-commit.sh

# 2. Register hook
ggen hook create \
  --event pre-commit \
  --script ./validate-commit.sh \
  --name "commit-validator"

# 3. Install Git hook
cat &gt; .git/hooks/pre-commit &lt;&lt; 'EOF'
#!/bin/bash
./validate-commit.sh
EOF
chmod +x .git/hooks/pre-commit

# 4. Try committing broken code
# → Blocked by validation!
</code></pre>
<hr />
<h3 id="workflow-4-documentation-generation"><a class="header" href="#workflow-4-documentation-generation">Workflow 4: Documentation Generation</a></h3>
<p><strong>Goal:</strong> Auto-generate and deploy documentation</p>
<pre><code class="language-bash"># 1. Create docs script
cat &gt; generate-docs.sh &lt;&lt; 'EOF'
#!/bin/bash

echo "Generating documentation..."

# 1. Rust API docs
cargo doc --no-deps

# 2. Generate README from ontology
ggen ai generate \
  "Generate README.md from this ontology" \
  --code "$(cat domain.ttl)" \
  &gt; README.md

# 3. Generate API guide
ggen ai generate \
  "Generate API usage guide" \
  --project . \
  &gt; docs/API.md

# 4. Build mdBook (if using)
if [ -f book.toml ]; then
  mdbook build
fi

echo "Documentation complete!"
EOF

chmod +x generate-docs.sh

# 2. Register hook
ggen hook create \
  --event post-generate \
  --script ./generate-docs.sh \
  --name "auto-docs"

# 3. Generate code - docs created automatically!
ggen project gen my-app --graph domain.ttl
</code></pre>
<hr />
<h3 id="workflow-5-cicd-integration"><a class="header" href="#workflow-5-cicd-integration">Workflow 5: CI/CD Integration</a></h3>
<p><strong>Goal:</strong> Trigger CI/CD pipeline on code changes</p>
<pre><code class="language-bash"># 1. Create CI trigger script
cat &gt; trigger-ci.sh &lt;&lt; 'EOF'
#!/bin/bash

echo "Triggering CI/CD pipeline..."

# Commit generated code
git add .
git commit -m "chore: Regenerate code from ontology changes"

# Push to trigger CI
git push origin main

# Trigger GitHub Actions workflow
gh workflow run deploy.yml

echo "CI/CD triggered!"
EOF

chmod +x trigger-ci.sh

# 2. Register hook
ggen hook create \
  --event post-generate \
  --script ./trigger-ci.sh \
  --name "ci-trigger"

# 3. Create GitHub Actions workflow
cat &gt; .github/workflows/deploy.yml &lt;&lt; 'EOF'
name: Deploy

on:
  workflow_dispatch:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Build
        run: cargo build --release

      - name: Test
        run: cargo test

      - name: Deploy
        run: ./deploy.sh
EOF
</code></pre>
<hr />
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="1-make-scripts-idempotent"><a class="header" href="#1-make-scripts-idempotent">1. Make Scripts Idempotent</a></h3>
<p><strong>Scripts should be safe to run multiple times:</strong></p>
<pre><code class="language-bash"># ❌ Bad: Fails on second run
echo "new_line" &gt;&gt; config.txt

# ✅ Good: Idempotent
if ! grep -q "new_line" config.txt; then
  echo "new_line" &gt;&gt; config.txt
fi
</code></pre>
<h3 id="2-use-exit-codes-properly"><a class="header" href="#2-use-exit-codes-properly">2. Use Exit Codes Properly</a></h3>
<p><strong>Return appropriate exit codes:</strong></p>
<pre><code class="language-bash">#!/bin/bash
set -e  # Exit on first error

# Success
cargo test &amp;&amp; exit 0

# Failure
exit 1
</code></pre>
<h3 id="3-log-everything"><a class="header" href="#3-log-everything">3. Log Everything</a></h3>
<p><strong>Comprehensive logging helps debugging:</strong></p>
<pre><code class="language-bash">#!/bin/bash

LOG_FILE="hook-$(date +%Y%m%d).log"

{
  echo "=== Hook Started: $(date) ==="
  cargo make fmt
  cargo make lint
  echo "=== Hook Completed: $(date) ==="
} 2&gt;&amp;1 | tee -a "$LOG_FILE"
</code></pre>
<h3 id="4-handle-errors-gracefully"><a class="header" href="#4-handle-errors-gracefully">4. Handle Errors Gracefully</a></h3>
<p><strong>Don't fail silently:</strong></p>
<pre><code class="language-bash">#!/bin/bash

if ! cargo test; then
  echo "Tests failed!" &gt;&amp;2
  ggen ai analyze --project . --complexity &gt; failure-analysis.json
  exit 1
fi
</code></pre>
<h3 id="5-use-environment-variables"><a class="header" href="#5-use-environment-variables">5. Use Environment Variables</a></h3>
<p><strong>Make scripts configurable:</strong></p>
<pre><code class="language-bash">#!/bin/bash

# Configuration
GRAPH_FILE="${GGEN_GRAPH:-domain.ttl}"
FORCE="${GGEN_FORCE:-false}"

# Use variables
ggen project gen . --graph "$GRAPH_FILE" $([ "$FORCE" = "true" ] &amp;&amp; echo "--force")
</code></pre>
<hr />
<h2 id="advanced-patterns"><a class="header" href="#advanced-patterns">Advanced Patterns</a></h2>
<h3 id="conditional-hooks"><a class="header" href="#conditional-hooks">Conditional Hooks</a></h3>
<p><strong>Execute hooks based on conditions:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# conditional-hook.sh

# Only run in CI environment
if [ -n "$CI" ]; then
  cargo make test
fi

# Only format Rust files
if git diff --name-only | grep -q "\.rs$"; then
  cargo make fmt
fi

# Only regenerate if ontology changed
if git diff --name-only | grep -q "\.ttl$"; then
  ggen project gen . --graph domain.ttl --force
fi
</code></pre>
<h3 id="hook-chains"><a class="header" href="#hook-chains">Hook Chains</a></h3>
<p><strong>Chain multiple hooks together:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# hook-chain.sh

# 1. Format
./format.sh || exit 1

# 2. Lint
./lint.sh || exit 1

# 3. Test
./test.sh || exit 1

# 4. Deploy
./deploy.sh
</code></pre>
<h3 id="parallel-hook-execution"><a class="header" href="#parallel-hook-execution">Parallel Hook Execution</a></h3>
<p><strong>Run independent hooks in parallel:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# parallel-hooks.sh

# Start background jobs
./format.sh &amp;
PID1=$!

./generate-docs.sh &amp;
PID2=$!

./run-tests.sh &amp;
PID3=$!

# Wait for all
wait $PID1 $PID2 $PID3

echo "All hooks completed!"
</code></pre>
<h3 id="hook-dependencies"><a class="header" href="#hook-dependencies">Hook Dependencies</a></h3>
<p><strong>Ensure hooks run in correct order:</strong></p>
<pre><code class="language-bash">#!/bin/bash
# hook-with-deps.sh

# Check prerequisites
if [ ! -f "target/debug/ggen" ]; then
  echo "Build required first!"
  cargo build
fi

# Run dependent tasks
ggen utils doctor
ggen graph load domain.ttl
ggen project gen . --graph domain.ttl
</code></pre>
<hr />
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="hook-not-executing"><a class="header" href="#hook-not-executing">Hook Not Executing</a></h3>
<p><strong>Problem:</strong> Hook registered but doesn't run</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># 1. Verify hook is registered
ggen hook list

# 2. Check script is executable
chmod +x your-script.sh

# 3. Test script manually
./your-script.sh

# 4. Check hook monitor
ggen hook monitor --once
</code></pre>
<h3 id="script-errors"><a class="header" href="#script-errors">Script Errors</a></h3>
<p><strong>Problem:</strong> Hook script fails with errors</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Add debugging
set -x  # Print commands
set -e  # Exit on error

# Check logs
cat hook-*.log

# Run with verbose output
bash -x your-script.sh
</code></pre>
<h3 id="permission-issues"><a class="header" href="#permission-issues">Permission Issues</a></h3>
<p><strong>Problem:</strong> <code>Permission denied</code></p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Make script executable
chmod +x script.sh

# Check file permissions
ls -la script.sh

# Use absolute path
ggen hook create --event post-generate --script "$(pwd)/script.sh"
</code></pre>
<h3 id="infinite-loops"><a class="header" href="#infinite-loops">Infinite Loops</a></h3>
<p><strong>Problem:</strong> Hook triggers itself recursively</p>
<p><strong>Solution:</strong></p>
<pre><code class="language-bash"># Add guard condition
if [ -f ".hook-running" ]; then
  echo "Hook already running, skipping..."
  exit 0
fi

touch .hook-running
# ... your hook logic ...
rm .hook-running
</code></pre>
<hr />
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<ol>
<li><strong>Explore Examples:</strong> See <code>docs/src/examples/hooks/</code> for real-world scripts</li>
<li><strong>Template Library:</strong> Use pre-built hook templates from marketplace</li>
<li><strong>Advanced Integration:</strong> Combine hooks with AI commands for intelligent automation</li>
<li><strong>Contribute:</strong> Share your hook scripts with the community</li>
</ol>
<hr />
<h2 id="references"><a class="header" href="#references">References</a></h2>
<ul>
<li><strong>Release Notes:</strong> <code>docs/src/whats-new-2.5.0.md</code></li>
<li><strong>AI Integration:</strong> <code>docs/src/guides/ai-guide.md</code></li>
<li><strong>Command Reference:</strong> <code>docs/src/reference/cli.md</code></li>
<li><strong>Examples:</strong> <code>docs/src/examples/hooks/</code></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../guides/ai-guide.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../guides/production-ready.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../guides/ai-guide.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../guides/production-ready.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>



        <script>
            window.playground_line_numbers = true;
        </script>

        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../editor.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>

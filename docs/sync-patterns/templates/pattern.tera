{# =============================================================================
   Tera Template: Individual Pattern Chapter

   This template generates a comprehensive pattern chapter in Alexander style.
   Generated by ggen sync from pattern-language.ttl ontology.

   Variables from SPARQL query:
   - label: Pattern name (e.g., "THE SINGLE COMMAND")
   - number: Pattern number (1-16)
   - confidence: Confidence level (1-3)
   - confidenceStars: Star symbols (*, **, ***)
   - categoryLabel: Category name
   - slug: URL-safe identifier
   - evocativeImage: Opening poetic phrase
   - context: The situation where pattern applies
   - problem: Core problem statement
   - solution: The "Therefore" resolution
   - implementation: How ggen sync implements it
   - deepPattern: Philosophical depth
   - flags: CLI flags (pipe-separated)
   - manifestSections: Manifest sections (pipe-separated)
============================================================================= #}
# {{ number }}. {{ label }} {{ confidenceStars | default(value="") }}

{% if evocativeImage %}
*{{ evocativeImage }}*
{% endif %}

---

## Context

{{ context | default(value="[Context to be documented]") }}

---

❖ ❖ ❖

## The Problem

**{{ problem | default(value="[Problem statement to be documented]") }}**

{% if context %}
The forces at play create tension between competing needs. Without resolution, these forces lead to suboptimal outcomes—complexity where simplicity is needed, fragility where robustness is required, opacity where clarity is essential.
{% endif %}

---

## Therefore

{{ solution | default(value="[Solution to be documented]") }}

---

❖ ❖ ❖

## Implementation in ggen sync

{% if implementation %}
{{ implementation }}
{% else %}
This pattern is implemented through the ggen sync pipeline and its configuration.
{% endif %}

{% if flags %}
### CLI Flags

This pattern is invoked or modified by the following command-line flags:

| Flag | Purpose |
|------|---------|
{% for flag in flags | split(pat="|") %}
| `{{ flag }}` | Invokes {{ label }} behavior |
{% endfor %}

**Example:**
```bash
ggen sync {{ flags | split(pat="|") | first }}
```
{% endif %}

{% if manifestSections %}
### Manifest Configuration

This pattern is configured through the following manifest sections:

| Section | Purpose |
|---------|---------|
{% for section in manifestSections | split(pat="|") %}
| `{{ section }}` | Configures {{ label }} |
{% endfor %}
{% endif %}

---

## The Deeper Pattern

{% if deepPattern %}
{{ deepPattern }}
{% else %}
{{ label }} represents a fundamental approach to solving a recurring problem in code generation. Understanding the forces it resolves helps you apply it effectively and recognize when it applies to new situations.

The pattern is not merely a technique—it is a **relationship** between context, forces, and resolution. When you find yourself in this context, with these forces at play, this pattern provides the shape of the solution.
{% endif %}

---

## Confidence Level: {{ confidenceStars | default(value="*") }}

{% if confidence == 3 %}
**Fundamental Pattern** (★★★)

This is a fundamental pattern—essential to the language. Without it, the system loses coherence. It should be applied in virtually all circumstances where its context applies.
{% elif confidence == 2 %}
**Established Pattern** (★★)

This is an established pattern—proven in practice. You can rely on it. It has been validated through real-world use and represents a stable solution to its problem.
{% else %}
**Emerging Pattern** (★)

This is an emerging pattern—promising but still evolving. Use it, but expect refinements in future versions as our understanding deepens.
{% endif %}

---

## Pattern Connections

This pattern exists within a network of related patterns:

{% if categoryLabel %}
**Category:** {{ categoryLabel }}

This pattern belongs to the {{ categoryLabel }} group, which {% if categorySlug == "foundation" %}establishes the fundamental structure of the system{% elif categorySlug == "knowledge" %}governs how domain knowledge flows through the pipeline{% elif categorySlug == "safety" %}protects users and systems from harm{% elif categorySlug == "integrity" %}ensures trust and reproducibility{% elif categorySlug == "selective" %}allows focused, intentional operation{% else %}addresses specific concerns in the system{% endif %}.
{% endif %}

### Related Patterns

Explore these connected patterns to deepen your understanding:

{% if number == 1 %}
- **[MANIFEST AS TRUTH](02-manifest-as-truth.md)** — THE SINGLE COMMAND reads its configuration from the manifest
- **[THREE-LAYER ARCHITECTURE](03-three-layer-architecture.md)** — Structures how the command is implemented
- **[DRY RUN](08-dry-run.md)** — Modifies command behavior via `--dry-run`
- **[VALIDATION GATE](09-validation-gate.md)** — Modifies command behavior via `--validate-only`
- **[RULE SELECTION](16-rule-selection.md)** — Modifies command behavior via `--rule`
{% elif number == 2 %}
- **[THE SINGLE COMMAND](01-single-command.md)** — Reads the manifest to determine what to do
- **[ONTOLOGY LOADING](04-ontology-loading.md)** — Configured by the `[ontology]` section
- **[INFERENCE ENRICHMENT](05-inference-enrichment.md)** — Configured by the `[inference]` section
- **[GENERATION RULES](06-generation-rules.md)** — Configured by the `[generation]` section
- **[DETERMINISTIC OUTPUT](13-deterministic-output.md)** — Uses BTreeMap for consistent ordering
{% elif number == 4 %}
- **[MANIFEST AS TRUTH](02-manifest-as-truth.md)** — The `[ontology]` section configures loading
- **[INFERENCE ENRICHMENT](05-inference-enrichment.md)** — Operates on the loaded graph
- **[GENERATION RULES](06-generation-rules.md)** — Queries the loaded graph
{% elif number == 13 %}
- **[MANIFEST AS TRUTH](02-manifest-as-truth.md)** — Uses BTreeMap for deterministic serialization
- **[INFERENCE ENRICHMENT](05-inference-enrichment.md)** — Requires ordered rule execution
- **[GENERATION RULES](06-generation-rules.md)** — Requires ORDER BY in queries
- **[AUDIT TRAIL](14-audit-trail.md)** — Verifies determinism via content hashes
{% else %}
- See the [Pattern Map](../pattern-map.md) for complete connection details
{% endif %}

---

## When This Pattern Breaks

No pattern is universal. {{ label }} may struggle when:

{% if number == 1 %}
- The flags proliferate beyond comprehension
- The command does too many unrelated things
- Users need fine-grained control that one command cannot provide

ggen sync avoids these traps by keeping flags focused on behavior modification and deriving all generation logic from the manifest.
{% elif number == 13 %}
- Legitimate operations require timestamps
- Random values are semantically necessary
- External systems introduce unavoidable non-determinism

ggen provides workarounds: determinism salts for unique-but-reproducible IDs, manifest variables for version-controlled "timestamps", and hash verification to detect non-determinism.
{% else %}
- Circumstances differ significantly from the pattern's context
- Forces balance differently than the pattern assumes
- Integration with external systems introduces constraints

When the pattern doesn't fit, step back and examine the forces. The pattern may need adaptation, or a different pattern may apply.
{% endif %}

---

{% if codeRefs %}
## Source Code References

The implementation of **{{ label }}** can be found in the following locations:

| Layer | File | Line | Description |
|-------|------|------|-------------|
{% for ref in codeRefs | split(pat="|||") %}
{% set parts = ref | split(pat="::") %}
| {{ parts | nth(n=3) | default(value="domain") }} | `{{ parts | nth(n=0) }}` | [{{ parts | nth(n=1) }}](https://github.com/seanchatmangpt/ggen/blob/main/{{ parts | nth(n=0) }}#L{{ parts | nth(n=1) }}) | {{ parts | nth(n=2) | default(value="Implementation") }} |
{% endfor %}

---
{% endif %}

## Summary

**{{ label }}** resolves the tension between {{ problem | truncate(length=100, end="...") | default(value="competing forces in code generation") }}.

The solution: {{ solution | truncate(length=200, end="...") | default(value="Apply the pattern as described above.") }}

---

*This chapter was generated by ggen sync from the pattern-language.ttl ontology.*
*Pattern {{ number }} of 16 in "A Pattern Language for ggen sync"*

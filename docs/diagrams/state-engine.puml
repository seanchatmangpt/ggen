@startuml
title Engine v2 Pipeline States
[*] --> InputValidation
InputValidation --> Load
Load --> Shape
Shape --> Bind
Bind --> Matrix
Matrix --> Render
Render --> Write
Write --> [*]

note right of InputValidation
  InputValidator + SecurityValidator
  - Scope/action validation
  - Path traversal protection
  - File size limits
end note

note right of Load
  Load Stage
  - Discover templates
  - Load RDF graphs
  - Load SHACL shapes
  - Performance tracking
end note

note right of Shape
  Shape Stage
  - SHACL validation
  - Graph integrity checks
  - Performance tracking
end note

note right of Bind
  Bind Stage
  - SPARQL variable binding
  - Context merging
  - Performance tracking
end note

note right of Matrix
  Matrix Stage
  - Matrix query execution
  - Row generation
  - Performance tracking
end note

note right of Render
  Render Stage
  - Template rendering
  - Parallel processing
  - Performance tracking
end note

note right of Write
  Write Stage
  - Output generation
  - Manifest key computation
  - Performance tracking
end note
@enduml

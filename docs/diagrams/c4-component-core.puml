@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Component.puml
title rgen â€“ Engine v2 Components
Component(engine, "Engine", "6-stage pipeline orchestrator")
Component(load_stage, "Load Stage", "Load templates, RDF, shapes")
Component(shape_stage, "Shape Stage", "SHACL validation")
Component(bind_stage, "Bind Stage", "SPARQL variable binding")
Component(matrix_stage, "Matrix Stage", "Matrix query processing")
Component(render_stage, "Render Stage", "Template rendering")
Component(write_stage, "Write Stage", "Output + manifest generation")
Component(validator, "InputValidator", "Security + input validation")
Component(security, "SecurityValidator", "Path traversal, file size limits")
Component(metrics, "PerformanceTracker", "SLO monitoring + timing")
Component(manifest, "ManifestGenerator", "Deterministic key generation")
Component(config, "EngineConfig", "Configuration management")
engine -> load_stage
engine -> shape_stage
engine -> bind_stage
engine -> matrix_stage
engine -> render_stage
engine -> write_stage
engine -> validator
engine -> security
engine -> metrics
engine -> manifest
engine -> config
load_stage -> metrics
shape_stage -> metrics
bind_stage -> metrics
matrix_stage -> metrics
render_stage -> metrics
write_stage -> metrics
@enduml

@startuml
title validate(scope, action) - Engine v2
actor CLI
participant Engine
participant Validator as InputValidator
participant Security as SecurityValidator
participant FM
participant RDF
participant Shapes
participant SHACL
participant Metrics as PerformanceTracker
CLI -> Engine: validate(scope, action)
Engine -> Validator: validate_scope_action()
Validator --> Engine: validation result
Engine -> Security: validate_template_spec()
Security --> Engine: validation result
Engine -> Metrics: start_stage("validate")
Engine -> FM: parse+render
Engine -> RDF: load data
Engine -> Shapes: load shapes
Engine -> SHACL: validate(RDF, Shapes)
SHACL --> Engine: validation result
Engine -> Metrics: end_stage("validate")
Engine --> CLI: graphs=n, shapes=m, templates=t, SLO status
@enduml

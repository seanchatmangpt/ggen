@startuml
!include https://raw.githubusercontent.com/plantuml-stdlib/C4-PlantUML/master/C4_Container.puml
title rgen â€“ Containers (v2 Architecture)
Person(dev, "Developer")
System_Boundary(rgen, "rgen") {
  Container(cli, "CLI", "clap", "UX and argument parsing")
  Container(engine, "Engine v2", "lib", "6-stage pipeline orchestrator")
  Container(validation, "Validation Layer", "lib", "InputValidator + SecurityValidator")
  Container(metrics, "Metrics Layer", "lib", "PerformanceTracker + SLO monitoring")
  Container(io, "IO Adapters", "lib", "frontmatter/fs/renderer")
  Container(sem, "Semantics", "lib", "OWL/SHACL/SPARQL modules")
  Container(determinism, "Determinism", "lib", "ManifestGenerator + hash computation")
  ContainerDb(store, "Graph Store", "Oxigraph", "in-memory RDF")
}
dev -> cli : commands
cli -> engine : project/list/show/validate/graph
engine -> validation : validate inputs, security checks
engine -> metrics : track performance, SLO compliance
engine -> io : parse fm, render, write
engine -> sem : load owl, validate shacl, run sparql
engine -> determinism : generate manifest keys
sem -> store : quads, SELECT, ASK
determinism -> store : hash nquads
io -> fs : read/write
@enduml

[package]
name = "ggen-marketplace"
version = "2.6.0"
edition = "2021"
authors = ["Ggen Contributors"]
description = "Core trait system for distributed package marketplace"
license = "MIT OR Apache-2.0"
repository = "https://github.com/yourusername/ggen"

[dependencies]
# Async runtime and traits
tokio = { version = "1.35", features = ["full"] }
async-trait = "0.1"

# Serialization
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"

# Date and time
chrono = { version = "0.4", features = ["serde"] }

# Cryptography
sha2 = "0.10"
hex = "0.4"
base64 = "0.22"
ed25519-dalek = { version = "2.1", features = ["rand_core"], optional = true }
rand = { version = "0.8", optional = true }

# Error handling
thiserror = "1.0"
ggen-utils = { path = "../ggen-utils", version = "2.6.0" }

# Machine Learning / Recommendations
ndarray = "0.16"

# Content-Addressed Storage
cid = "0.11"
multihash = "0.19"


# Unix file locking
[target.'cfg(unix)'.dependencies]
nix = { version = "0.29", features = ["fs"], optional = true }

# WebAssembly Plugins
wasmtime = { version = "28.0", features = ["cranelift"] }

# Smart Caching
moka = { version = "0.12", features = ["future"] }

# File system walking
walkdir = "2.5"

# Async utilities
futures = "0.3"

# Search engine
tantivy = "0.22"

# OpenTelemetry instrumentation (matching workspace versions)
tracing = "0.1"
opentelemetry.workspace = true
opentelemetry_sdk.workspace = true
opentelemetry-otlp.workspace = true
tracing-opentelemetry.workspace = true
tracing-subscriber = { version = "0.3", features = [
  "fmt",
  "env-filter",
  "registry",
] }

[dev-dependencies]
tokio-test = "0.4"
tempfile = "3.23"
mockall = "0.13"
chicago-tdd-tools = { workspace = true }

[lib]
name = "ggen_marketplace"
path = "src/lib.rs"

[features]
# Active features (actually used in codebase):
# - crypto: Cryptographic signing support (Ed25519)
# - default: Includes crypto feature
default = ["crypto"]
crypto = ["ed25519-dalek", "rand"]
all = ["crypto"]
# Note: GraphQL and graphql-server features removed (waste elimination - unused code)
# Note: Replication feature never existed (distributed_setup example was waste)
# Note: HTTP dependencies removed (reqwest, axum, tower, tower-http) - CLI-only version
# Note: CentralizedRegistry removed - HTTP-based registry not needed for CLI

[package]
name = "ggen-cli-lib"
version = "3.4.1"
authors = ["Sean Chatman <sean@chatmangpt.com>"]
description = "CLI interface for ggen"
edition = "2021"
license = "MIT"
repository = "https://github.com/seanchatmangpt/ggen"
readme = "README.md"
keywords = ["cli", "code-generation", "rdf", "templates"]
categories = ["development-tools", "command-line-utilities"]

[lints.clippy]
multiple_crate_versions = "allow"

[[bin]]
name = "ggen"
path = "src/main.rs"

[lib]
name = "ggen_cli_lib"
path = "src/lib.rs"

[dependencies]
# Workspace dependencies
anyhow.workspace = true
tokio.workspace = true
serde.workspace = true
serde_json.workspace = true
serde_yaml.workspace = true
chrono.workspace = true
toml.workspace = true
tera.workspace = true
regex.workspace = true
rayon.workspace = true
tracing.workspace = true
log.workspace = true
clap.workspace = true
clap-noun-verb = { workspace = true, default-features = false }
once_cell.workspace = true
uuid.workspace = true
futures.workspace = true

# Local dependencies (use workspace = true pattern for consistency)
ggen-utils.workspace = true
ggen-core.workspace = true
ggen-ai.workspace = true
ggen-domain.workspace = true
# NOTE: ggen-marketplace-v2 deferred to v4.0.0

# Crate-specific dependencies
gag = "0.1"
clap_complete = "4.5.58"
clap-noun-verb-macros.workspace = true
sha2 = "0.10"
dotenvy = "0.15"
glob = "0.3"
semver = "1.0"
dirs = "6.0"
oxigraph = "0.5"
walkdir = "2.5"
colored = "3.0"
genai = "0.4"
linkme = "0.3"
notify = "6.1"
notify-debouncer-full = "0.3"
tar = "0.4"
flate2 = "1.0"
md5 = "0.8"


[features]
# Default: minimal dependencies for core CLI functionality
default = []

# Autonomic capabilities (MAPE-K loop, introspection flags)
# Enables: --capabilities, --introspect, --graph flags for AI agent discovery
autonomic = ["clap-noun-verb/autonomic"]

# Agent2028 (cryptographic receipts for trillion-agent ecosystem)
# Enables: proof-of-execution, deterministic transaction receipts
agent2028 = ["clap-noun-verb/agent2028"]

# RDF/Ontology Control Layer with MCP
# Enables: RDF metadata processing, ontology management
rdf = ["clap-noun-verb/rdf"]

# Kernel capabilities (deterministic execution)
# Enables: deterministic command execution, replay safety
kernel = ["clap-noun-verb/kernel"]

# Async runtime support
# Enables: tokio async tasks, futures coordination
async = ["clap-noun-verb/async"]

# Full feature set (all optional features)
full = ["autonomic", "agent2028", "rdf", "kernel", "async"]

# Testing features
live-llm-tests = [] # Opt-in for live LLM integration tests

[dev-dependencies]
assert_cmd = "2"
assert_fs = "1"
predicates = "3" # Assertions for CLI testing
mockall = "0.13" # London TDD mocking framework
fake = { version = "4.4", features = ["derive"] } # Fake data generation
tempfile = "3.23" # Temporary files/directories for testing
serde_yaml = "0.9" # YAML parsing for frontmatter tests
serde_json = "1.0" # JSON parsing for AI response tests
criterion = { version = "0.5", features = [
  "async_tokio",
  "html_reports",
] } # Benchmarking framework
tokio-test = "0.4" # Tokio testing utilities
notify = "6.1" # File system watcher for watch mode tests
chicago-tdd-tools = { version = "1.4.0", features = ["testing-extras", "async"] }

[[bench]]
name = "marketplace_benchmark"
harness = false

[[bench]]
name = "packs_phase2_3_benchmarks"
harness = false

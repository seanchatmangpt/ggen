[package]
name = "ggen-cli-lib"
version = "0.2.0"
authors = ["Sean Chatman <sean@chatmangpt.com>"]
description = "CLI interface for ggen"
edition = "2021"
license = "MIT"
repository = "https://github.com/seanchatmangpt/ggen"
readme = "README.md"
keywords = ["cli", "code-generation", "rdf", "templates"]
categories = ["development-tools", "command-line-utilities"]

[lints.clippy]
multiple_crate_versions = "allow"

[[bin]]
name = "ggen"
path = "src/main.rs"

[lib]
name = "ggen_cli_lib"
path = "src/lib.rs"

[dependencies]
# Workspace dependencies
anyhow.workspace = true
thiserror.workspace = true
tokio.workspace = true
serde.workspace = true
serde_json.workspace = true
serde_yaml = "0.9"
chrono = { version = "0.4", features = ["serde"] }
toml.workspace = true
tera.workspace = true
regex.workspace = true
rayon.workspace = true
tracing.workspace = true
log = "0.4.28"
clap.workspace = true
clap-noun-verb.workspace = true
once_cell.workspace = true
uuid.workspace = true
futures.workspace = true

# Local dependencies (use workspace = true pattern for consistency)
ggen-utils.workspace = true
ggen-core.workspace = true
ggen-ai.workspace = true
ggen-domain.workspace = true
ggen-marketplace-v2 = { path = "../ggen-marketplace-v2", version = "3.0.0" }

# Crate-specific dependencies
clap_complete = "4.5.58"
clap-noun-verb-macros.workspace = true
sha2 = "0.10"
dotenvy = "0.15"
glob = "0.3"
semver = "1.0"
dirs = "6.0"
oxigraph = "0.5"
walkdir = "2.5"
colored = "3.0"
indicatif = "0.17"
genai = { workspace = true }

# Optional A2A Protocol support (using generated code)
a2a-generated = { path = "../a2a-generated", optional = true, default-features = false }
linkme = "0.3"
notify = "6.1"
notify-debouncer-full = "0.3"
tar = "0.4"
flate2 = "1.0"
md5 = "0.8"


[features]
# Autonomic CLI features (used by clap-noun-verb macros)
autonomic = []

# Testing features
live-llm-tests = [] # Opt-in for live LLM integration tests

# A2A Protocol support - temporarily disabled due to compilation errors
use-a2a-rs = ["a2a-generated"]  # Use generated a2a code
# default = ["use-a2a-rs"]  # Temporarily disabled

[dev-dependencies]
assert_cmd = "2"
assert_fs = "1"
predicates = "3" # Assertions for CLI testing
mockall = "0.13" # London TDD mocking framework
fake = { version = "4.4", features = ["derive"] } # Fake data generation
tempfile = "3.23" # Temporary files/directories for testing
serde_yaml = "0.9" # YAML parsing for frontmatter tests
serde_json = "1.0" # JSON parsing for AI response tests
criterion = { version = "0.5", features = [
  "async_tokio",
  "html_reports",
] } # Benchmarking framework
tokio-test = "0.4" # Tokio testing utilities
notify = "6.1" # File system watcher for watch mode tests
chicago-tdd-tools = { version = "1.4.0", features = ["testing-extras"] }

[[bench]]
name = "marketplace_benchmark"
harness = false

[[bench]]
name = "packs_phase2_3_benchmarks"
harness = false

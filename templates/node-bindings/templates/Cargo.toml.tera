{# =============================================================================
   CARGO.TOML TEMPLATE - Generates Cargo configuration for Neon
   Configures the Rust crate for native Node.js bindings
   ============================================================================= #}
[package]
name = "{{ module_name | default(value='ggen-node') | replace(from='-', to='_') }}"
version = "{{ module_version | default(value='1.0.0') }}"
description = "{{ module_description | default(value='Node.js bindings') }}"
authors = ["ggen contributors"]
edition = "2021"
license = "{{ module_license | default(value='MIT') }}"

[lib]
crate-type = ["cdylib"]

[dependencies]
# Neon for Node.js bindings
neon = { version = "1.0", default-features = false, features = ["napi-8"] }

# Serialization support
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
neon-serde = "0.10"

# Error handling
thiserror = "1.0"

{%- if has_async_functions | default(value=false) %}
# Async runtime (if needed)
tokio = { version = "1.35", features = ["full"], optional = true }
{%- endif %}

[features]
default = []
async = ["tokio"]

[profile.release]
lto = true
codegen-units = 1
opt-level = 3

---
to: "src/errors/{{ error | snake_case }}_error.rs"
vars:
  error: "FailedError"
  type: "Failed_LOWER"
---

use std::error::Error;
use std::fmt;

/// Failed error type
#[derive(Debug, Clone)]
pub struct FailedError {
    pub message: String,
    pub details: Option<String>,
}

impl FailedError {
    pub fn new(message: impl Into<String>) -> Self {
        Self {
            message: message.into(),
            details: None,
        }
    }

    pub fn with_details(message: impl Into<String>, details: impl Into<String>) -> Self {
        Self {
            message: message.into(),
            details: Some(details.into()),
        }
    }
}

impl fmt::Display for FailedError {
    fn fmt(&self, f: &mut fmt::Formatter<'_>) -> fmt::Result {
        write!(f, "Failed: {}", self.message)?;
        if let Some(ref details) = self.details {
            write!(f, " ({})", details)?;
        }
        Ok(())
    }
}

impl Error for FailedError {}

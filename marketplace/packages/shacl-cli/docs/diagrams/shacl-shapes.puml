@startuml SHACL Shape Hierarchy
!theme plain
skinparam backgroundColor #FEFEFE
skinparam handwritten false

title SHACL Shape Types and Constraint Hierarchy

package "SHACL Core" {
  abstract class "sh:Shape" as shape {
    + sh:targetClass
    + sh:targetNode
    + sh:targetSubjectsOf
    + sh:targetObjectsOf
    + sh:severity
    + sh:message
    + sh:deactivated
  }

  class "sh:NodeShape" as nodeshape {
    Validates entire nodes
    --
    + sh:closed
    + sh:ignoredProperties
    + sh:property
  }

  class "sh:PropertyShape" as propshape {
    Validates property values
    --
    + sh:path
    + sh:qualifiedValueShape
    + sh:qualifiedMinCount
    + sh:qualifiedMaxCount
  }

  shape <|-- nodeshape
  shape <|-- propshape
}

package "Constraint Types" {
  abstract class "Constraint" as constraint {
    + severity: Violation|Warning|Info
    + message: string
  }

  class "Cardinality Constraints" as cardinality {
    + sh:minCount
    + sh:maxCount
    + sh:uniqueLang
  }

  class "Value Type Constraints" as valuetype {
    + sh:datatype
    + sh:class
    + sh:nodeKind
  }

  class "Value Range Constraints" as valuerange {
    + sh:minInclusive
    + sh:maxInclusive
    + sh:minExclusive
    + sh:maxExclusive
  }

  class "String Constraints" as string {
    + sh:minLength
    + sh:maxLength
    + sh:pattern
    + sh:languageIn
  }

  class "Logical Constraints" as logical {
    + sh:and
    + sh:or
    + sh:not
    + sh:xone
  }

  class "Property Pair Constraints" as proppair {
    + sh:equals
    + sh:disjoint
    + sh:lessThan
    + sh:lessThanOrEquals
  }

  class "Shape-Based Constraints" as shapebased {
    + sh:node
    + sh:property
    + sh:qualifiedValueShape
  }

  class "Other Constraints" as other {
    + sh:closed
    + sh:hasValue
    + sh:in
  }

  constraint <|-- cardinality
  constraint <|-- valuetype
  constraint <|-- valuerange
  constraint <|-- string
  constraint <|-- logical
  constraint <|-- proppair
  constraint <|-- shapebased
  constraint <|-- other
}

package "SHACL-SPARQL" {
  class "SPARQLConstraint" as sparql {
    + sh:select
    + sh:ask
    + sh:prefixes
    + Custom validation logic
  }

  constraint <|-- sparql
}

nodeshape --> constraint : applies
propshape --> constraint : applies

note right of nodeshape
  Node shapes validate entire
  nodes/resources against
  target criteria
end note

note right of propshape
  Property shapes validate
  specific property values
  along a path
end note

note bottom of logical
  Logical constraints combine
  multiple constraints with
  boolean logic (AND, OR, NOT, XOR)
end note

note bottom of sparql
  SPARQL constraints enable
  custom validation logic using
  SPARQL SELECT or ASK queries
end note

@enduml

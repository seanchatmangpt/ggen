PREFIX agw: <https://ggen.ai/ontology/api-gateway#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

# List all API gateway routes with methods and backends
SELECT ?route ?path ?method ?backend ?rateLimitRPS
WHERE {
  ?route a agw:Route ;
         agw:routePath ?path ;
         agw:httpMethod ?method ;
         agw:hasBackendService ?backend .
  
  OPTIONAL {
    ?route agw:hasRateLimiter ?ratelimiter .
    ?ratelimiter agw:requestsPerSecond ?rateLimitRPS .
  }
}
ORDER BY ?path ?method

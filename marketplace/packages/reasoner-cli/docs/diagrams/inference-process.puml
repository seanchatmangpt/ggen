@startuml inference-process
!theme blueprint

title OWL Inference and Entailment Checking Process

start

:Input Ontology + Query;

partition "Preprocessing" {
  :Load Ontology into Memory;

  :Build Class Hierarchy;

  :Index Properties;
  note right
    - Object properties
    - Data properties
    - Annotation properties
  end note

  :Cache Subsumptions;
}

partition "Inference Type" {
  if (Query Type?) then (Subsumption)
    :Check if A ⊑ B;

    :Traverse Class Hierarchy;

    if (A is subclass of B?) then (yes)
      :Return TRUE;
    else (no)
      :Return FALSE;
    endif

  elseif (Entailment) then
    :Check if axiom entailed;

    :Apply Reasoning Rules;
    note right
      OWL 2 DL Rules:
      - Transitivity
      - Symmetry
      - Inverse properties
      - Property chains
    end note

    if (Axiom derivable?) then (yes)
      :Generate Justification;
      :Return TRUE + Proof;
    else (no)
      :Return FALSE;
    endif

  elseif (Equivalence) then
    :Check if A ≡ B;

    :Check A ⊑ B AND B ⊑ A;

    if (Bidirectional subsumption?) then (yes)
      :Return TRUE;
    else (no)
      :Return FALSE;
    endif

  else (Instance Checking)
    :Check if individual has type;

    :Realize ABox;

    :Compute Direct Types;

    if (Type found?) then (yes)
      :Return TRUE + Type List;
    else (no)
      :Return FALSE;
    endif
  endif
}

partition "Result Processing" {
  :Format Output;

  if (Explanation requested?) then (yes)
    :Generate Justifications;
    note right
      Minimal axiom sets that
      explain the entailment
    end note
  endif

  :Include Metrics;
  note right
    - Inference time
    - Rules applied
    - Complexity measure
  end note
}

:Return Results;

stop

@enduml

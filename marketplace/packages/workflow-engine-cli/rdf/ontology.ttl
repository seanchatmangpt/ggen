@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix ggen: <http://ggen.ruv.io/ontology#> .
@prefix bpmn: <http://www.omg.org/spec/BPMN/20100524/MODEL#> .
@prefix wfe: <http://ggen.ruv.io/workflow-engine#> .

# ============================================================================
# Workflow Engine CLI Ontology
# ============================================================================
# BPMN 2.0 workflow execution and orchestration using clap-noun-verb pattern
# Supports: Process orchestration, task management, event handling, state persistence

<http://ggen.ruv.io/workflow-engine>
    a owl:Ontology ;
    dcterms:title "Workflow Engine CLI Ontology" ;
    dcterms:description "BPMN 2.0 workflow execution and orchestration CLI using clap-noun-verb" ;
    dcterms:created "2025-01-09"^^xsd:date ;
    dcterms:modified "2025-01-09"^^xsd:date ;
    owl:versionInfo "1.0.0" ;
    dcterms:creator "Generated Ontology System" ;
    rdfs:comment "Complete BPMN workflow engine with process orchestration, task management, and event handling" .

# ============================================================================
# NOUN 1: Workflow - BPMN workflow definitions
# ============================================================================

wfe:Workflow
    a owl:Class ;
    rdfs:label "Workflow" ;
    rdfs:comment "BPMN 2.0 workflow definition with processes, tasks, gateways, and events" ;
    rdfs:subClassOf ggen:Noun ;
    skos:definition "A complete BPMN workflow definition including process flow, task definitions, gateway logic, and event handlers" ;
    skos:example "A customer onboarding workflow with parallel approval tasks and event-driven notifications" .

## Workflow Properties
wfe:workflowId
    a owl:DatatypeProperty ;
    rdfs:label "workflow ID" ;
    rdfs:domain wfe:Workflow ;
    rdfs:range xsd:string ;
    rdfs:comment "Unique identifier for the workflow definition" .

wfe:workflowName
    a owl:DatatypeProperty ;
    rdfs:label "workflow name" ;
    rdfs:domain wfe:Workflow ;
    rdfs:range xsd:string ;
    rdfs:comment "Human-readable workflow name" .

wfe:workflowVersion
    a owl:DatatypeProperty ;
    rdfs:label "workflow version" ;
    rdfs:domain wfe:Workflow ;
    rdfs:range xsd:string ;
    rdfs:comment "Semantic version of the workflow definition" .

wfe:bpmnDefinition
    a owl:DatatypeProperty ;
    rdfs:label "BPMN definition" ;
    rdfs:domain wfe:Workflow ;
    rdfs:range xsd:string ;
    rdfs:comment "BPMN 2.0 XML definition of the workflow" .

wfe:hasProcess
    a owl:ObjectProperty ;
    rdfs:label "has process" ;
    rdfs:domain wfe:Workflow ;
    rdfs:range wfe:Process ;
    rdfs:comment "Processes contained in this workflow" .

## Workflow Verbs

wfe:create
    a owl:Class ;
    rdfs:label "create" ;
    rdfs:comment "Create a new BPMN workflow definition from XML or JSON" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Workflow ;
    skos:example "workflow create --file approval-process.bpmn --name 'Approval Workflow' --version 1.0.0" .

wfe:deploy
    a owl:Class ;
    rdfs:label "deploy" ;
    rdfs:comment "Deploy a workflow to the execution engine" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Workflow ;
    skos:example "workflow deploy --workflow-id wf-123 --environment production --validate" .

wfe:list
    a owl:Class ;
    rdfs:label "list" ;
    rdfs:comment "List all deployed workflows with filtering and pagination" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Workflow ;
    skos:example "workflow list --status active --filter 'name contains approval' --limit 20" .

wfe:validate
    a owl:Class ;
    rdfs:label "validate" ;
    rdfs:comment "Validate BPMN workflow definition against BPMN 2.0 schema" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Workflow ;
    skos:example "workflow validate --file process.bpmn --strict --check-references" .

wfe:version
    a owl:Class ;
    rdfs:label "version" ;
    rdfs:comment "Create a new version of an existing workflow" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Workflow ;
    skos:example "workflow version --workflow-id wf-123 --new-version 2.0.0 --changes 'Added parallel gateway'" .

# ============================================================================
# NOUN 2: Process - Workflow process instances
# ============================================================================

wfe:Process
    a owl:Class ;
    rdfs:label "Process" ;
    rdfs:comment "Executable BPMN process within a workflow" ;
    rdfs:subClassOf ggen:Noun ;
    skos:definition "A BPMN process definition that can be instantiated and executed" ;
    skos:example "An approval process with sequential user tasks and parallel review branches" .

## Process Properties
wfe:processId
    a owl:DatatypeProperty ;
    rdfs:label "process ID" ;
    rdfs:domain wfe:Process ;
    rdfs:range xsd:string ;
    rdfs:comment "Unique identifier for the process definition" .

wfe:processType
    a owl:DatatypeProperty ;
    rdfs:label "process type" ;
    rdfs:domain wfe:Process ;
    rdfs:range xsd:string ;
    rdfs:comment "Type of process: executable, collaboration, or choreography" .

wfe:isExecutable
    a owl:DatatypeProperty ;
    rdfs:label "is executable" ;
    rdfs:domain wfe:Process ;
    rdfs:range xsd:boolean ;
    rdfs:comment "Whether this process can be executed" .

wfe:hasTask
    a owl:ObjectProperty ;
    rdfs:label "has task" ;
    rdfs:domain wfe:Process ;
    rdfs:range wfe:Task ;
    rdfs:comment "Tasks contained in this process" .

## Process Verbs

wfe:start
    a owl:Class ;
    rdfs:label "start" ;
    rdfs:comment "Start a new process instance with input variables" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Process ;
    skos:example "process start --workflow-id wf-123 --variables '{\"customer_id\": \"C001\", \"amount\": 1000}'" .

wfe:pause
    a owl:Class ;
    rdfs:label "pause" ;
    rdfs:comment "Pause a running process instance" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Process ;
    skos:example "process pause --instance-id inst-456 --reason 'Pending review'" .

wfe:resume
    a owl:Class ;
    rdfs:label "resume" ;
    rdfs:comment "Resume a paused process instance" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Process ;
    skos:example "process resume --instance-id inst-456 --update-variables '{\"approved\": true}'" .

wfe:abort
    a owl:Class ;
    rdfs:label "abort" ;
    rdfs:comment "Abort a process instance and cleanup resources" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Process ;
    skos:example "process abort --instance-id inst-456 --reason 'Customer requested cancellation'" .

wfe:status
    a owl:Class ;
    rdfs:label "status" ;
    rdfs:comment "Get detailed status of a process instance" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Process ;
    skos:example "process status --instance-id inst-456 --include-tasks --include-variables" .

# ============================================================================
# NOUN 3: Task - Process tasks and activities
# ============================================================================

wfe:Task
    a owl:Class ;
    rdfs:label "Task" ;
    rdfs:comment "BPMN task or activity within a process" ;
    rdfs:subClassOf ggen:Noun ;
    skos:definition "A unit of work in a BPMN process: user task, service task, script task, etc." ;
    skos:example "A user task requiring manual approval or a service task invoking an external API" .

## Task Properties
wfe:taskId
    a owl:DatatypeProperty ;
    rdfs:label "task ID" ;
    rdfs:domain wfe:Task ;
    rdfs:range xsd:string ;
    rdfs:comment "Unique identifier for the task" .

wfe:taskType
    a owl:DatatypeProperty ;
    rdfs:label "task type" ;
    rdfs:domain wfe:Task ;
    rdfs:range xsd:string ;
    rdfs:comment "Type of task: user, service, script, manual, business-rule, send, receive" .

wfe:taskState
    a owl:DatatypeProperty ;
    rdfs:label "task state" ;
    rdfs:domain wfe:Task ;
    rdfs:range xsd:string ;
    rdfs:comment "Current state: pending, assigned, in-progress, completed, failed, cancelled" .

wfe:assignee
    a owl:DatatypeProperty ;
    rdfs:label "assignee" ;
    rdfs:domain wfe:Task ;
    rdfs:range xsd:string ;
    rdfs:comment "User or system assigned to execute this task" .

wfe:priority
    a owl:DatatypeProperty ;
    rdfs:label "priority" ;
    rdfs:domain wfe:Task ;
    rdfs:range xsd:integer ;
    rdfs:comment "Task priority (0-100, higher is more urgent)" .

wfe:dueDate
    a owl:DatatypeProperty ;
    rdfs:label "due date" ;
    rdfs:domain wfe:Task ;
    rdfs:range xsd:dateTime ;
    rdfs:comment "Deadline for task completion" .

## Task Verbs

wfe:assign
    a owl:Class ;
    rdfs:label "assign" ;
    rdfs:comment "Assign a task to a user or group" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Task ;
    skos:example "task assign --task-id task-789 --assignee user@example.com --priority 80 --due-date 2025-01-15" .

wfe:complete
    a owl:Class ;
    rdfs:label "complete" ;
    rdfs:comment "Mark a task as completed and provide output variables" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Task ;
    skos:example "task complete --task-id task-789 --variables '{\"approved\": true, \"comments\": \"Looks good\"}'" .

wfe:delegate
    a owl:Class ;
    rdfs:label "delegate" ;
    rdfs:comment "Delegate a task to another user" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Task ;
    skos:example "task delegate --task-id task-789 --from user1@example.com --to user2@example.com --reason 'Subject matter expert'" .

wfe:escalate
    a owl:Class ;
    rdfs:label "escalate" ;
    rdfs:comment "Escalate an overdue or blocked task" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Task ;
    skos:example "task escalate --task-id task-789 --to manager@example.com --reason 'Overdue by 2 days'" .

wfe:retry
    a owl:Class ;
    rdfs:label "retry" ;
    rdfs:comment "Retry a failed service or script task" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Task ;
    skos:example "task retry --task-id task-789 --max-attempts 3 --backoff exponential" .

# ============================================================================
# NOUN 4: Instance - Process execution instances
# ============================================================================

wfe:Instance
    a owl:Class ;
    rdfs:label "Instance" ;
    rdfs:comment "A running or completed instance of a workflow process" ;
    rdfs:subClassOf ggen:Noun ;
    skos:definition "An execution instance of a BPMN process with state, variables, and history" ;
    skos:example "A specific customer onboarding process running for customer C001" .

## Instance Properties
wfe:instanceId
    a owl:DatatypeProperty ;
    rdfs:label "instance ID" ;
    rdfs:domain wfe:Instance ;
    rdfs:range xsd:string ;
    rdfs:comment "Unique identifier for the process instance" .

wfe:instanceState
    a owl:DatatypeProperty ;
    rdfs:label "instance state" ;
    rdfs:domain wfe:Instance ;
    rdfs:range xsd:string ;
    rdfs:comment "Current state: pending, running, suspended, completed, failed, aborted" .

wfe:startTime
    a owl:DatatypeProperty ;
    rdfs:label "start time" ;
    rdfs:domain wfe:Instance ;
    rdfs:range xsd:dateTime ;
    rdfs:comment "When the instance started execution" .

wfe:endTime
    a owl:DatatypeProperty ;
    rdfs:label "end time" ;
    rdfs:domain wfe:Instance ;
    rdfs:range xsd:dateTime ;
    rdfs:comment "When the instance completed or failed" .

wfe:variables
    a owl:DatatypeProperty ;
    rdfs:label "variables" ;
    rdfs:domain wfe:Instance ;
    rdfs:range xsd:string ;
    rdfs:comment "Process variables as JSON" .

wfe:belongsToWorkflow
    a owl:ObjectProperty ;
    rdfs:label "belongs to workflow" ;
    rdfs:domain wfe:Instance ;
    rdfs:range wfe:Workflow ;
    rdfs:comment "The workflow this instance is executing" .

## Instance Verbs

wfe:listInstances
    a owl:Class ;
    rdfs:label "list" ;
    rdfs:comment "List process instances with filtering and pagination" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Instance ;
    skos:example "instance list --workflow-id wf-123 --state running --limit 50 --sort start-time" .

wfe:show
    a owl:Class ;
    rdfs:label "show" ;
    rdfs:comment "Show detailed information about a process instance" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Instance ;
    skos:example "instance show --instance-id inst-456 --include-tasks --include-variables --include-events" .

wfe:trace
    a owl:Class ;
    rdfs:label "trace" ;
    rdfs:comment "Show execution trace of a process instance" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Instance ;
    skos:example "instance trace --instance-id inst-456 --format tree --include-timestamps" .

wfe:history
    a owl:Class ;
    rdfs:label "history" ;
    rdfs:comment "Show complete execution history and audit trail" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Instance ;
    skos:example "instance history --instance-id inst-456 --include-state-changes --include-variable-changes" .

wfe:metrics
    a owl:Class ;
    rdfs:label "metrics" ;
    rdfs:comment "Show performance metrics for a process instance" ;
    rdfs:subClassOf ggen:Verb ;
    ggen:operatesOn wfe:Instance ;
    skos:example "instance metrics --instance-id inst-456 --include-task-durations --include-bottlenecks" .

# ============================================================================
# BPMN 2.0 Elements
# ============================================================================

wfe:Gateway
    a owl:Class ;
    rdfs:label "Gateway" ;
    rdfs:comment "BPMN gateway for controlling process flow" ;
    skos:definition "Exclusive, parallel, inclusive, event-based, or complex gateway" .

wfe:Event
    a owl:Class ;
    rdfs:label "Event" ;
    rdfs:comment "BPMN event (start, end, intermediate, boundary)" ;
    skos:definition "Events that can trigger, interrupt, or complete process flows" .

wfe:SequenceFlow
    a owl:Class ;
    rdfs:label "Sequence Flow" ;
    rdfs:comment "Connection between BPMN elements defining execution order" ;
    skos:definition "Directed edge in the process graph" .

wfe:DataObject
    a owl:Class ;
    rdfs:label "Data Object" ;
    rdfs:comment "Data used or produced by tasks" ;
    skos:definition "Information flowing through the process" .

# ============================================================================
# State Management
# ============================================================================

wfe:State
    a owl:Class ;
    rdfs:label "State" ;
    rdfs:comment "Execution state of a workflow element" ;
    skos:definition "State machine states for workflow execution" .

wfe:Pending a wfe:State ; rdfs:label "Pending" ; rdfs:comment "Waiting to start" .
wfe:Running a wfe:State ; rdfs:label "Running" ; rdfs:comment "Currently executing" .
wfe:Suspended a wfe:State ; rdfs:label "Suspended" ; rdfs:comment "Paused execution" .
wfe:Completed a wfe:State ; rdfs:label "Completed" ; rdfs:comment "Successfully finished" .
wfe:Failed a wfe:State ; rdfs:label "Failed" ; rdfs:comment "Execution failed" .
wfe:Aborted a wfe:State ; rdfs:label "Aborted" ; rdfs:comment "Manually terminated" .

# ============================================================================
# Event Types
# ============================================================================

wfe:EventType
    a owl:Class ;
    rdfs:label "Event Type" ;
    rdfs:comment "Type of BPMN event" ;
    skos:definition "Classification of workflow events" .

wfe:StartEvent a wfe:EventType ; rdfs:label "Start Event" ; rdfs:comment "Initiates process execution" .
wfe:EndEvent a wfe:EventType ; rdfs:label "End Event" ; rdfs:comment "Terminates process execution" .
wfe:IntermediateEvent a wfe:EventType ; rdfs:label "Intermediate Event" ; rdfs:comment "Occurs during execution" .
wfe:BoundaryEvent a wfe:EventType ; rdfs:label "Boundary Event" ; rdfs:comment "Attached to activity boundary" .

# ============================================================================
# CLI Integration
# ============================================================================

wfe:CliCommand
    a owl:Class ;
    rdfs:label "CLI Command" ;
    rdfs:comment "Workflow engine CLI command structure" ;
    skos:definition "Command pattern: workflow-engine <noun> <verb> [options]" ;
    skos:example "workflow-engine workflow create --file process.bpmn" .

wfe:CommandOption
    a owl:Class ;
    rdfs:label "Command Option" ;
    rdfs:comment "CLI command option or flag" ;
    skos:definition "Additional parameters for CLI commands" .

# ============================================================================
# Performance and Metrics
# ============================================================================

wfe:Metric
    a owl:Class ;
    rdfs:label "Metric" ;
    rdfs:comment "Performance or execution metric" ;
    skos:definition "Measurements of workflow performance and efficiency" .

wfe:throughput a wfe:Metric ; rdfs:label "Throughput" ; rdfs:comment "Instances per time unit" .
wfe:cycleTime a wfe:Metric ; rdfs:label "Cycle Time" ; rdfs:comment "Average time to complete" .
wfe:utilizationRate a wfe:Metric ; rdfs:label "Utilization Rate" ; rdfs:comment "Resource utilization percentage" .
wfe:errorRate a wfe:Metric ; rdfs:label "Error Rate" ; rdfs:comment "Percentage of failed instances" .

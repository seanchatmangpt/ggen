/**
 * @fileoverview YAWL REST API Routes
 * Generated from RDF servlet specifications
 * DO NOT EDIT - auto-generated by ggen sync
 * @module routes
 */

import { z } from 'zod';

// =============================================================================
// Route Definitions
// =============================================================================

export const ROUTES = [
  // Admin Servlets
  {
    servletId: 'admin-metrics',
    servletName: 'MetricsServlet',
    servletType: 'AdminServlet',
    method: 'GET',
    path: '/api/admin/metrics',
    requiresAuth: true,
  },
  {
    servletId: 'admin-replay',
    servletName: 'ReplayCaseServlet',
    servletType: 'AdminServlet',
    method: 'POST',
    path: '/api/admin/cases/:id/replay',
    requiresAuth: true,
  },
  // Case Servlets
  {
    servletId: 'case-cancel',
    servletName: 'CancelCaseServlet',
    servletType: 'CaseServlet',
    method: 'POST',
    path: '/api/cases/:id/cancel',
    requiresAuth: true,
  },
  {
    servletId: 'case-create',
    servletName: 'CreateCaseServlet',
    servletType: 'CaseServlet',
    method: 'POST',
    path: '/api/cases',
    requiresAuth: true,
  },
  {
    servletId: 'case-get',
    servletName: 'GetCaseServlet',
    servletType: 'CaseServlet',
    method: 'GET',
    path: '/api/cases/:id',
    requiresAuth: true,
  },
  {
    servletId: 'case-list',
    servletName: 'ListCasesServlet',
    servletType: 'CaseServlet',
    method: 'GET',
    path: '/api/cases',
    requiresAuth: true,
  },
  // Task Servlets
  {
    servletId: 'task-complete',
    servletName: 'CompleteTaskServlet',
    servletType: 'TaskServlet',
    method: 'POST',
    path: '/api/tasks/:taskId/complete',
    requiresAuth: true,
  },
  {
    servletId: 'task-enable',
    servletName: 'EnableTaskServlet',
    servletType: 'TaskServlet',
    method: 'POST',
    path: '/api/tasks/:taskId/enable',
    requiresAuth: true,
  },
  {
    servletId: 'task-start',
    servletName: 'StartTaskServlet',
    servletType: 'TaskServlet',
    method: 'POST',
    path: '/api/tasks/:taskId/start',
    requiresAuth: true,
  },
  {
    servletId: 'workitem-list',
    servletName: 'ListWorkItemsServlet',
    servletType: 'TaskServlet',
    method: 'GET',
    path: '/api/workitems',
    requiresAuth: true,
  },
  // Workflow Servlets
  {
    servletId: 'workflow-create',
    servletName: 'CreateWorkflowServlet',
    servletType: 'WorkflowServlet',
    method: 'POST',
    path: '/api/workflows',
    requiresAuth: true,
  },
  {
    servletId: 'workflow-get',
    servletName: 'GetWorkflowServlet',
    servletType: 'WorkflowServlet',
    method: 'GET',
    path: '/api/workflows/:id',
    requiresAuth: true,
  },
  {
    servletId: 'workflow-list',
    servletName: 'ListWorkflowsServlet',
    servletType: 'WorkflowServlet',
    method: 'GET',
    path: '/api/workflows',
    requiresAuth: true,
  },
];

// =============================================================================
// Route by Method
// =============================================================================

export const ROUTES_BY_METHOD = {
  GET: ROUTES.filter(r => r.method === 'GET'),
  POST: ROUTES.filter(r => r.method === 'POST'),
  PUT: ROUTES.filter(r => r.method === 'PUT'),
  DELETE: ROUTES.filter(r => r.method === 'DELETE'),
  PATCH: ROUTES.filter(r => r.method === 'PATCH'),
};

// =============================================================================
// Route by Type
// =============================================================================

export const ROUTES_BY_TYPE = {
  AdminServlet: ROUTES.filter(r => r.servletType === 'AdminServlet'),
  CaseServlet: ROUTES.filter(r => r.servletType === 'CaseServlet'),
  TaskServlet: ROUTES.filter(r => r.servletType === 'TaskServlet'),
  WorkflowServlet: ROUTES.filter(r => r.servletType === 'WorkflowServlet'),
};

// =============================================================================
// Router Setup Helper
// =============================================================================

/**
 * Configure Express router with generated routes
 * @param {object} router - Express Router instance
 * @param {object} handlers - Map of servletId to handler function
 * @returns {object} Configured router
 */
export function configureRouter(router, handlers) {
  for (const route of ROUTES) {
    const handler = handlers[route.servletId];
    if (!handler) {
      console.warn(`No handler found for servlet: ${route.servletId}`);
      continue;
    }

    const method = route.method.toLowerCase();
    router[method](route.path, handler);
  }

  return router;
}

/**
 * Get route by servlet ID
 * @param {string} servletId
 * @returns {object|undefined}
 */
export function getRoute(servletId) {
  return ROUTES.find(r => r.servletId === servletId);
}

/**
 * Get protected routes (requiresAuth = true)
 * @returns {Array}
 */
export function getProtectedRoutes() {
  return ROUTES.filter(r => r.requiresAuth);
}

/**
 * Get public routes (requiresAuth = false)
 * @returns {Array}
 */
export function getPublicRoutes() {
  return ROUTES.filter(r => !r.requiresAuth);
}

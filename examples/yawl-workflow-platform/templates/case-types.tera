---
to: "lib/types/cases.ts"
description: Case management types
metadata:
  category: types
---
{# =============================================================================
   CASE TYPES TEMPLATE
   DO NOT EDIT - auto-generated by ggen sync
   ============================================================================= #}
/**
 * @fileoverview YAWL Case Management Types
 * DO NOT EDIT - auto-generated by ggen sync
 */

import { z } from 'zod';

export const CaseStatus = {
{%- for row in sparql_results %}
{%- set statusLabel = row["?statusLabel"] | default(value="") %}
{%- if statusLabel != "" %}
  {{ statusLabel | upper }}: '{{ statusLabel | lower }}',
{%- endif %}
{%- endfor %}
} as const;

export type CaseStatus = typeof CaseStatus[keyof typeof CaseStatus];

export const CaseSchema = z.object({
  caseId: z.string(),
  specId: z.string(),
  status: z.enum([{% for row in sparql_results %}{% set statusLabel = row["?statusLabel"] | default(value="") %}{% if statusLabel != "" %}'{{ statusLabel | lower }}'{% if not loop.last %}, {% endif %}{% endif %}{% endfor %}]),
  createdAt: z.string().datetime(),
  updatedAt: z.string().datetime().optional(),
  completedAt: z.string().datetime().optional(),
  caseData: z.record(z.unknown()).default({}),
  parentCaseId: z.string().optional(),
  lastSuccessfulTaskId: z.string().optional(),
});

export type Case = z.infer<typeof CaseSchema>;

export const VALID_CASE_TRANSITIONS: Record<CaseStatus, CaseStatus[]> = {
{%- for row in sparql_results %}
{%- set statusLabel = row["?statusLabel"] | default(value="") %}
{%- if statusLabel != "" %}
{%- if statusLabel == "Active" %}
  '{{ statusLabel | lower }}': ['completed', 'cancelled', 'failed', 'suspended'],
{%- elif statusLabel == "Suspended" %}
  '{{ statusLabel | lower }}': ['active', 'cancelled'],
{%- else %}
  '{{ statusLabel | lower }}': [],
{%- endif %}
{%- endif %}
{%- endfor %}
};

export function isValidTransition(from: CaseStatus, to: CaseStatus): boolean {
  return VALID_CASE_TRANSITIONS[from]?.includes(to) ?? false;
}

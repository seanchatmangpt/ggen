//! Generated Integration Tests - DO NOT EDIT
//!
//! This file is automatically generated by ggen from ontology/commands.ttl
//! To make changes, edit the ontology and run: ggen sync

use axum::http::StatusCode;
use serde_json::json;
use uuid::Uuid;

use world::*;

#[tokio::test]
async fn test_api_health() {
    let app = build_router();

    let response = app
        .oneshot(
            axum::http::Request::builder()
                .uri("/health")
                .body(axum::body::Body::empty())
                .unwrap(),
        )
        .await
        .unwrap();

    assert_eq!(response.status(), StatusCode::OK);
}

{% for row in sparql_results -%}
{%- set command_name = row["?commandName"] -%}
{%- set http_path = row["?httpPath"] | default(value="/" ~ command_name | lower) -%}

#[tokio::test]
async fn test_{{ command_name | lower }}_endpoint() {
    let app = build_router();

    // Create test command payload
    let payload = json!({
        // TODO: Add actual field values based on command schema
    });

    let response = app
        .oneshot(
            axum::http::Request::builder()
                .method("POST")
                .uri("{{ http_path }}")
                .header("content-type", "application/json")
                .body(axum::body::Body::from(serde_json::to_vec(&payload).unwrap()))
                .unwrap(),
        )
        .await
        .unwrap();

    assert_eq!(response.status(), StatusCode::OK);
}

{% endfor %}

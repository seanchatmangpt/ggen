%%{init: {'theme':'base'}}%%
graph TB
    %% Generated C4 Context Diagram - DO NOT EDIT
    %% This file is automatically generated by ggen from ontology/
    %% To make changes, edit the ontology and run: ggen sync

    classDef system fill:#1168bd,stroke:#0b4884,color:#ffffff
    classDef external fill:#999999,stroke:#6b6b6b,color:#ffffff

{% set context_name = sparql_results[0]["?contextName"] | default(value="Attribution") -%}

    System["{{ context_name }} System
    ---
    {{ sparql_results[0]["?contextDescription"] | default(value="Domain-Driven Design system") }}"]:::system

    Publisher["Publisher
    ---
    External Actor
    Submits clicks"]:::external

    Advertiser["Advertiser
    ---
    External Actor
    Provides offers"]:::external

    Publisher -->|"Records clicks"| System
    System -->|"Calculates payouts"| Publisher
    Advertiser -->|"Defines offers"| System

    %% Aggregates
{% for row in sparql_results -%}
{%- if row["?aggregateName"] %}
    System -.->|"Manages"| {{ row["?aggregateName"] }}["{{ row["?aggregateName"] }}"]
{% endif -%}
{%- endfor %}

---
to: lib/schemas/index.ts
description: Generates Zod validation schemas from RDF ontology
vars:
  entityName: string
  propName: string
  propType: string
metadata:
  category: schemas
  output_type: validation
---
{# =============================================================================
   ZOD SCHEMAS - Generated from RDF ontology
   DO NOT EDIT - auto-generated by ggen sync
   ============================================================================= #}
/**
 * @fileoverview Generated Zod schemas from RDF ontology
 * DO NOT EDIT - auto-generated by ggen sync
 */

import { z } from "zod";

{%- set current_entity = "" -%}
{%- for row in sparql_results -%}
{%- set entityName = row["?entityName"] | default(value="") -%}
{%- set propName = row["?propName"] | default(value="") -%}
{%- set propType = row["?propType"] | default(value="string") -%}
{%- set required = row["?required"] | default(value="false") -%}
{%- set format = row["?format"] | default(value="") -%}
{%- set minLength = row["?minLength"] | default(value="") -%}
{%- set maxLength = row["?maxLength"] | default(value="") -%}
{%- set enumValues = row["?enumValues"] | default(value="") -%}

{%- if entityName != current_entity -%}
{%- if current_entity != "" %}
});

/** Inferred type for {{ current_entity }} */
export type {{ current_entity }} = z.infer<typeof {{ current_entity | lower }}Schema>;

/** Create schema (omits id, createdAt) */
export const create{{ current_entity }}Schema = {{ current_entity | lower }}Schema.omit({ id: true, createdAt: true });
export type Create{{ current_entity }} = z.infer<typeof create{{ current_entity }}Schema>;

/** Update schema (all optional) */
export const update{{ current_entity }}Schema = {{ current_entity | lower }}Schema.partial().omit({ id: true, createdAt: true });
export type Update{{ current_entity }} = z.infer<typeof update{{ current_entity }}Schema>;

{% endif -%}
{%- set_global current_entity = entityName %}
/**
 * {{ entityName }} validation schema
 */
export const {{ entityName | lower }}Schema = z.object({
{%- endif %}
  {{ propName }}: {% if propType == "string" -%}
z.string(){% if format == "email" %}.email("Invalid email"){% endif %}{% if minLength != "" %}.min({{ minLength }}){% endif %}{% if maxLength != "" %}.max({{ maxLength }}){% endif %}
  {%- elif propType == "integer" -%}
z.number().int()
  {%- elif propType == "datetime" -%}
z.string().datetime()
  {%- elif propType == "boolean" -%}
z.boolean()
  {%- elif propType == "enum" -%}
z.enum([{% for val in enumValues | split(pat=",") %}"{{ val }}"{% if not loop.last %}, {% endif %}{% endfor %}])
  {%- else -%}
z.string()
  {%- endif -%}
{% if required != "true" %}.optional().nullable(){% endif %},
{%- endfor %}
});

/** Inferred type for {{ current_entity }} */
export type {{ current_entity }} = z.infer<typeof {{ current_entity | lower }}Schema>;

/** Create schema */
export const create{{ current_entity }}Schema = {{ current_entity | lower }}Schema.omit({ id: true, createdAt: true });
export type Create{{ current_entity }} = z.infer<typeof create{{ current_entity }}Schema>;

/** Update schema */
export const update{{ current_entity }}Schema = {{ current_entity | lower }}Schema.partial().omit({ id: true, createdAt: true });
export type Update{{ current_entity }} = z.infer<typeof update{{ current_entity }}Schema>;

---
to: lib/types/api.mjs
description: API types as Zod schemas
metadata:
  category: types
---
/**
 * @fileoverview API types as Zod schemas
 * DO NOT EDIT - auto-generated by ggen sync
 * @module api-types
 */

import { z } from 'zod';

{%- set current_entity = "" -%}
{%- for row in sparql_results -%}
{%- set entityName = row["?entityName"] | default(value="") -%}
{%- set propName = row["?propName"] | default(value="") -%}
{%- set propType = row["?propType"] | default(value="string") -%}
{%- set required = row["?required"] | default(value="false") -%}
{%- set enumValues = row["?enumValues"] | default(value="") -%}

{%- if entityName != current_entity -%}
{%- if current_entity != "" %}
});

/**
 * @typedef {z.infer<typeof {{ current_entity }}Schema>} {{ current_entity }}
 */

export const Create{{ current_entity }}RequestSchema = {{ current_entity }}Schema.omit({ id: true, createdAt: true });
export const Update{{ current_entity }}RequestSchema = {{ current_entity }}Schema.partial().omit({ id: true, createdAt: true });

{% endif -%}
{%- set_global current_entity = entityName %}
// =============================================================================
// {{ entityName }}
// =============================================================================

export const {{ entityName }}Schema = z.object({
{%- endif %}
  {{ propName }}: {% if propType == "string" or propType == "datetime" %}z.string(){% elif propType == "integer" %}z.number().int(){% elif propType == "boolean" %}z.boolean(){% elif propType == "enum" %}z.enum([{% for val in enumValues | split(pat=",") %}"{{ val }}"{% if not loop.last %}, {% endif %}{% endfor %}]){% else %}z.string(){% endif %}{% if required != "true" %}.optional(){% endif %},
{%- endfor %}
});

/**
 * @typedef {z.infer<typeof {{ current_entity }}Schema>} {{ current_entity }}
 */

export const Create{{ current_entity }}RequestSchema = {{ current_entity }}Schema.omit({ id: true, createdAt: true });
export const Update{{ current_entity }}RequestSchema = {{ current_entity }}Schema.partial().omit({ id: true, createdAt: true });

// =============================================================================
// Common Types
// =============================================================================

export const ApiErrorSchema = z.object({
  error: z.string(),
  details: z.unknown().optional(),
});

/**
 * @typedef {z.infer<typeof ApiErrorSchema>} ApiError
 */

export const PaginatedResponseSchema = z.object({
  data: z.array(z.unknown()),
  total: z.number(),
  page: z.number(),
  pageSize: z.number(),
});

/**
 * @typedef {z.infer<typeof PaginatedResponseSchema>} PaginatedResponse
 */

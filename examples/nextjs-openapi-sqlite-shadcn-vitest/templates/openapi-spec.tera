---
to: lib/openapi/openapi.yaml
description: OpenAPI 3.0 specification
metadata:
  category: api
  format: openapi-3.0
---
# Generated by ggen sync - DO NOT EDIT
openapi: "3.0.3"

info:
  title: Task Management API
  version: "1.0.0"
  description: RESTful API for task management

servers:
  - url: http://localhost:3000/api
    description: Development server

paths:
{%- set current_entity = "" -%}
{%- set current_path = "" -%}
{%- for row in sparql_results -%}
{%- set entityName = row["?entityName"] | default(value="") -%}
{%- set path = row["?path"] | default(value="") -%}
{%- set method = row["?method"] | default(value="GET") | lower -%}
{%- set operationId = row["?operationId"] | default(value="") -%}
{%- set endpointDesc = row["?endpointDesc"] | default(value="") -%}

{%- if path != current_path -%}
{%- set_global current_path = path %}
  {{ path | replace(from="[id]", to="{id}") }}:
{%- endif %}
    {{ method }}:
      summary: {{ endpointDesc }}
      operationId: {{ operationId }}
      tags:
        - {{ entityName }}
{%- if "[id]" in path %}
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
{%- endif %}
{%- if method == "post" or method == "put" %}
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/{{ entityName }}"
{%- endif %}
      responses:
        "200":
          description: Success
          content:
            application/json:
              schema:
{%- if method == "get" and "[id]" not in path %}
                type: array
                items:
                  $ref: "#/components/schemas/{{ entityName }}"
{%- else %}
                $ref: "#/components/schemas/{{ entityName }}"
{%- endif %}
        "400":
          description: Bad request
        "404":
          description: Not found
        "500":
          description: Internal server error
{%- endfor %}

components:
  schemas:
{%- set current_entity = "" -%}
{%- for row in sparql_results -%}
{%- set entityName = row["?entityName"] | default(value="") -%}
{%- set propName = row["?propName"] | default(value="") -%}
{%- set propType = row["?propType"] | default(value="string") -%}
{%- set required = row["?required"] | default(value="false") -%}
{%- set format = row["?format"] | default(value="") -%}

{%- if entityName != current_entity -%}
{%- if current_entity != "" %}
{%- endif -%}
{%- set_global current_entity = entityName %}
    {{ entityName }}:
      type: object
      properties:
{%- endif %}
        {{ propName }}:
          type: {% if propType == "integer" %}integer{% elif propType == "boolean" %}boolean{% elif propType == "datetime" %}string{% else %}string{% endif %}
{%- if format != "" %}
          format: {{ format }}
{%- endif %}
{%- endfor %}

PREFIX rdf:  <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX ddd:  <https://ggen.io/ontology/ddd#>

SELECT ?commandName ?aggregateName ?eventName ?handlerLogic
WHERE {
  # Find all commands with their aggregates and events
  ?command a ddd:Command ;
           ddd:name ?commandName ;
           ddd:aggregate ?aggregate ;
           ddd:emitsEvent ?event .

  ?aggregate ddd:name ?aggregateName .
  ?event ddd:name ?eventName .

  OPTIONAL { ?command ddd:handlerLogic ?handlerLogic }
}
ORDER BY ?commandName

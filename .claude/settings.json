{
  "env": {
    "CLAUDE_FLOW_AUTO_COMMIT": "false",
    "CLAUDE_FLOW_AUTO_PUSH": "false",
    "CLAUDE_FLOW_HOOKS_ENABLED": "true",
    "CLAUDE_FLOW_TELEMETRY_ENABLED": "true",
    "CLAUDE_FLOW_REMOTE_EXECUTION": "true",
    "CLAUDE_FLOW_CHECKPOINTS_ENABLED": "true"
  },
  "permissions": {
    "allow": [
      "Bash(npx claude-flow:*)",
      "Bash(npm run lint)",
      "Bash(npm run test:*)",
      "Bash(npm test:*)",
      "Bash(git status)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(git config:*)",
      "Bash(git tag:*)",
      "Bash(git branch:*)",
      "Bash(git checkout:*)",
      "Bash(git stash:*)",
      "Bash(jq:*)",
      "Bash(node:*)",
      "Bash(which:*)",
      "Bash(pwd)",
      "Bash(ls:*)"
    ],
    "deny": [
      "Bash(rm -rf /)"
    ]
  },
  "hooks": {
    "SessionStart": [{"matcher": "", "hooks": [
      {"type": "command", "command": "./.claude/hooks/session-start.sh", "timeout": 30},
      {"type": "prompt", "prompt": "Session initialized. ggen v6.0.0. Read CLAUDE.md. Rules: cargo make ONLY, EPIC 9 for non-trivial, receipts not narratives."}
    ]}],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-command --command '{}' --validate-safety true --prepare-resources true"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks pre-edit --file '{}' --auto-assign-agents true --load-context true"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "cat | jq -r '.tool_input.command // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-command --command '{}' --track-metrics true --store-results true"
          }
        ]
      },
      {
        "matcher": "Write|Edit|MultiEdit",
        "hooks": [
          {
            "type": "command",
            "command": "cat | jq -r '.tool_input.file_path // .tool_input.path // empty' | tr '\\n' '\\0' | xargs -0 -I {} npx claude-flow@alpha hooks post-edit --file '{}' --format true --update-memory true"
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "manual",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'INPUT=$(cat); CUSTOM=$(echo \"$INPUT\" | jq -r \".custom_instructions // \\\"\\\"\"); echo \"ðŸ”„ PreCompact Guidance:\"; echo \"ðŸ“‹ IMPORTANT: Review CLAUDE.md in project root for:\"; echo \"   â€¢ 54 available agents and concurrent usage patterns\"; echo \"   â€¢ Swarm coordination strategies (hierarchical, mesh, adaptive)\"; echo \"   â€¢ SPARC methodology workflows with batchtools optimization\"; echo \"   â€¢ Critical concurrent execution rules (GOLDEN RULE: 1 MESSAGE = ALL OPERATIONS)\"; if [ -n \"$CUSTOM\" ]; then echo \"ðŸŽ¯ Custom compact instructions: $CUSTOM\"; fi; echo \"âœ… Ready for compact operation\"'"
          }
        ]
      },
      {
        "matcher": "auto",
        "hooks": [
          {
            "type": "command",
            "command": "/bin/bash -c 'echo \"ðŸ”„ Auto-Compact Guidance (Context Window Full):\"; echo \"ðŸ“‹ CRITICAL: Before compacting, ensure you understand:\"; echo \"   â€¢ All 54 agents available in .claude/agents/ directory\"; echo \"   â€¢ Concurrent execution patterns from CLAUDE.md\"; echo \"   â€¢ Batchtools optimization for 300% performance gains\"; echo \"   â€¢ Swarm coordination strategies for complex tasks\"; echo \"âš¡ Apply GOLDEN RULE: Always batch operations in single messages\"; echo \"âœ… Auto-compact proceeding with full agent context\"'"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "npx claude-flow@alpha hooks session-end --generate-summary true --persist-state true --export-metrics true"
          }
        ]
      }
    ]
  },
  "includeCoAuthoredBy": true,
  "enabledMcpjsonServers": ["claude-flow", "ruv-swarm"],
  "statusLine": {
    "type": "command",
    "command": ".claude/statusline-command.sh"
    "Stop": [{"matcher": "", "hooks": [{"type": "prompt", "prompt": "Before stop: tests pass? lint clean? uncommitted? receipts?"}]}]
  },
  "mcp_servers": {
    "enabled": false,
    "servers": {
      "github": {"command": "mcp-server-github", "env": {"GITHUB_TOKEN": "${GITHUB_TOKEN}"}, "disabled": true},
      "filesystem": {"command": "mcp-server-filesystem", "args": ["/home/user/ggen"], "disabled": true},
      "sparql": {"command": "mcp-server-sparql", "args": ["http://localhost:7878/query"], "disabled": true}
    }
  },
  "environment": {
    "env": {"RUST_BACKTRACE": "1", "RUST_LOG": "info", "CARGO_TERM_COLOR": "always", "RUSTFLAGS": "-D warnings", "GGEN_VERSION": "6.0.0"}
  },
  "tools_and_model": {
    "model": "claude-sonnet-4-5-20250929",
    "output_style": "structured",
    "temperature": 0.0,
    "tool_preferences": {"prefer_parallel_calls": true, "max_parallel_tools": 10}
  },
  "epic9": {
    "enabled": true,
    "default_agents": 10,
    "mandatory_phases": ["fan_out", "independent_construction", "collision_detection", "convergence", "refactoring", "closure"],
    "speedup_target": "2.8x-4.4x"
  },
  "slo_targets": {
    "cargo_make_check": "â‰¤5s",
    "cargo_make_test": "â‰¤30s",
    "cargo_make_lint": "â‰¤60s",
    "first_build": "â‰¤15s",
    "incremental_build": "â‰¤2s"
  },
  "cargo_make_protocol": {
    "rule": "cargo make [target] ONLY",
    "prohibited": ["cargo check", "cargo test", "cargo build", "cargo clippy"],
    "allowed": ["cargo make check", "cargo make test", "cargo make lint", "cargo make pre-commit"]
  },
  "andon_signals": {
    "RED": {"triggers": ["error[E", "FAILED", "panicked"], "action": "STOP immediately"},
    "YELLOW": {"triggers": ["warning:", "clippy::", "TODO"], "action": "Investigate"},
    "GREEN": {"triggers": ["test result: ok", "0 violations"], "action": "Continue"}
  },
  "project_metadata": {
    "name": "ggen",
    "version": "6.0.0",
    "description": "Ontology-driven code generation: RDF â†’ reproducible code",
    "rust_version": "1.91.1",
    "msrv": "1.75+",
    "workspace_crates": 27,
    "tech_stack": ["Rust 1.91.1", "Tokio 1.47", "Oxigraph 0.5.1", "Tera 1.20", "genai 0.4", "chicago-tdd-tools 1.4.0"]
  }
}
